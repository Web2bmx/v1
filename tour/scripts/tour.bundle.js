!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=20)}({0:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e){var t=localStorage.getItem(e);if(null==t)t={},"web2b"==e&&(t.respuestas={});else try{t=JSON.parse(t)}catch(e){return t}return t};return{getObjFromLocalStorage:e,saveWeb2bJson:function(t){var o=JSON.stringify(t),n=e("web2b_userId"),a=e("web2b_templateId"),i=localStorage.getItem("web2b_template");!o||i==o||n instanceof Object||a instanceof Object||(localStorage.setItem("web2b_template",o),$.post("scripts/salvar_datos.php",{userId:n,idSitio:a,info:encodeURIComponent(o)}).done((function(e){e.ok||console.log("Algo sali贸 mal. Por favor intentalo de nuevo mas tarde. "+e.mensaje)})).fail((function(e){console.log("Algo sali贸 mal. Por favor intentalo de nuevo mas tarde. "+e)})))},saveSelected:function(e,t,o,n){var a=e.selections||{},i=!1;if(t.includes("@switch")){var r=t.split("@");t=r[0],i=!0}switch(a[t]=a[t]||{},n){case"image":i?a[t].active=o:a[t].img=o,a[t].type=n;break;case"text":i?a[t].active=o:a[t].text=o,a[t].type=n;break;case"config":a[t].value=o,a[t].type=n}e.selections=a},getPagesFromDB:function(){var t=e("web2b_userId");return $.get("scripts/getActualPages.php",{userId:t}).done((function(e){return e.ok||console.log("Algo sali贸 mal. Por favor intentalo de nuevo mas tarde. "+e.mensaje),e.paginas})).fail((function(e){return console.log("Algo sali贸 mal. Por favor intentalo de nuevo mas tarde. "+e),{}}))},setDataObjects:function(e,t){localStorage.removeItem("web2b"),localStorage.setItem("web2b_templateId",e.idSitio),localStorage.setItem("web2b_userId",e.userId),localStorage.setItem("web2b_template",JSON.stringify(t)),localStorage.setItem("web2b_pages",JSON.stringify(e.paginas))},purgeTemplateData:function(){localStorage.removeItem("web2b_actualPage"),localStorage.removeItem("web2b_template"),localStorage.removeItem("web2b_templateId"),localStorage.removeItem("web2b_template"),localStorage.removeItem("web2b")}}}},2:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null,t=null,o=function(){$("#modal-close"),$("body").on("click","#modal-close",(function(){a()}))},n=function(){t=$("#modal-overlay"),e.before(t)},a=function(){e.fadeOut(500).find(".dialog").hide(),t&&t.hide()};return{init:function(t){(e=$(t)).find("#modal-close").length>0&&o(),e.find("#modal-overlay").length>0&&n()},hide:a,hideErrorMessage:function(){$(".dialog-error:visible").remove().detach()},showErrorMessage:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;0==e.find(o).length&&e.find(t).after($(o).clone()),null!=n&&e.find(o).html(n),e.find(o).hide().fadeIn("fast")},show:function(o){e.hide().fadeIn(500).find(".dialog").hide().filter(o).show(),t&&t.fadeIn(500)}}}},20:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=r(o(0)),a=r(o(21)),i=r(o(2));function r(e){return e&&e.__esModule?e:{default:e}}function l(){var e=new n.default,t=new a.default,o=new i.default,r=e.getObjFromLocalStorage("web2b"),l=0,s=($(".stage").length,function(){o.show("#dialog-existing-session"),$(".iniciar").on("click",(function(){e.purgeTemplateData(),r=e.getObjFromLocalStorage("web2b"),o.hide()})),$(".continuar").on("click",(function(){o.hide(),(l=Object.keys(r.respuestas).length+1)<4?(o.hide(),f(l)):o.show("#dialog-end")}))}),c=function(){o.show("#dialog-existing-project"),$(".continuar-proyecto").click((function(){location.href="/crea"})),$(".iniciar-proyecto").click((function(){e.purgeTemplateData(),o.hide()}))},u=function(){$("a[href*='#stage-']").on("click",(function(){var e=$(this);return g(e.closest(".question").attr("id"))&&((l=1*e.attr("href").replace("#stage-",""))<4?f(l):o.show("#dialog-end")),!1}))},f=function(e){o.hide();var t=0;1==e&&(t=500,$("#item-spaceman").animate({left:"50%",opacity:"0",width:"1rem"},300),$("#item-rocket").animate({bottom:"1rem"},300)),$("#item-rocket>img:last").animate({opacity:1},300),setTimeout((function(){$(".stage:visible").animate({top:"100%",bottom:"-100%"},1e3),d(),setTimeout((function(){$(".stage").hide().filter(":eq("+e+")").show().css({top:"-100%",bottom:"100%"}).animate({top:"0",bottom:0},1e3)}),2e3),setTimeout((function(){o.show("#dialog-question-"+l),$("#item-rocket>img:last").animate({opacity:0},300)}),3e3)}),t)},d=function(){for(var e=function(e){$(".stars"+e).animate({height:15*e+"px",opacity:.8-.2*e},1e3,(function(){setTimeout((function(){$(".stars"+e).animate({height:e+"px",opacity:"1"},1e3)}),1e3)}))},t=1;t<4;t++)e(t)},g=function(e){if("undefined"==e)return!0;var t=$("#"+e);if(t.find("input:checked").length>0||""!=t.find("input.otra").val()){o.hideErrorMessage();var n=t.find("h3").data("id"),a=t.find("h3").data("type"),i="",r="",l="";return t.find("input:checked").length>0&&(i=t.find("input:checked").val(),r=t.find("input:checked").attr("data-id"),l=t.find("input:checked").attr("data-loc-en")),""!=t.find("input.otra").val()&&(i=t.find("input.otra").val()),""==l&&6==a?m(n,a,i,l,r):p(n,a,i,l,r),!0}return o.showErrorMessage(t,"h3","#error-no-answer"),!1},m=function(e,t,o,n,a){$.ajax({url:"https://translation.googleapis.com/language/translate/v2?key=AIzaSyBR5kBWFTVAecBoW4IKDSjttophb4BC6fg",type:"post",data:{q:o,source:"es",target:"en",format:"text"},dataType:"json"}).done((function(n){p(e,t,o,n.data.translations[0].translatedText,a)})).fail((function(){p(e,t,o,o,a)}))},p=function(e,t,o,n,a){r.respuestas[e]={tipo:t,respuesta:o,localizacion_en:n,resp_id:a},localStorage.setItem("web2b",JSON.stringify(r))};return{init:function(){t.init(".options-container",".options-group"),o.init("#modal"),u(),o.hide();var n=0==Object.keys(r.respuestas).length?"NEW":"IN PROCESS";"IN PROCESS"==(n=Object.keys(e.getObjFromLocalStorage("web2b_template")).length>0?"WITH PROJECT":n)&&s(),"WITH PROJECT"==n&&c()}}}$(document).ready((function(){(new l).init()}))},21:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{init:function(e,t){$(t).hide(),$(e).find(".toggle").addClass("clickable").attr("data-state","off"),$(e).find(".show-less").hide(),$(e).find(".toggle").on("click",(function(){var o=$(this),n=o.closest(e).find(".toggle").index(o);"off"==o.attr("data-state")?($(e).find(".toggle").attr("data-state","off").filter(":eq("+n+")").attr("data-state","on"),$(e).find(".toggle .show-less").hide(),$(e).find(".toggle .show-more").show(),o.find(".show-more").hide(),o.find(".show-less").show(),o.closest(e).find(t).hide().filter(t+":eq("+n+")").slideDown("fast"),o.closest(e).find(t+":eq("+n+") input:first").trigger("click")):(o.attr("data-state","off"),o.find(".show-less").hide(),o.find(".show-more").show(),o.closest(e).find(t+":eq("+n+")").slideUp("fast"))}))}}}}});
//# sourceMappingURL=tour.bundle.js.map