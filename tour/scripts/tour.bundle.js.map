{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/dataManager.js","webpack:///./js/modal.js","webpack:///./tour/scripts/tour.js","webpack:///./js/menuSingleSelection.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getObjFromLocalStorage","jsonData","localStorage","getItem","respuestas","JSON","parse","e","saveWeb2bJson","jd","strJD","stringify","userId","idSitio","savedJD","setItem","$","post","info","encodeURIComponent","done","result","ok","console","log","mensaje","fail","saveSelected","type","selections","isSwitch","includes","arr","split","active","img","text","getPagesFromDB","paginas","setDataObjects","data","removeItem","purgeTemplateData","$modal","$overlay","setCloseButton","on","hide","setOverlay","before","fadeOut","find","init","ide","length","hideErrorMessage","remove","detach","showErrorMessage","$target","cont","mssg","arguments","undefined","after","clone","html","fadeIn","show","filter","Tour","new_dataManager","dataManager","new_menuSingleSelection","menuSingleSelection","new_modal","modal","_tplData","current_step","setDialogInProcess","keys","showStep","setDialogWithProject","click","location","href","setTourNavigation","$this","this","checkAnswer","closest","attr","replace","step","delay","animate","left","opacity","width","bottom","setTimeout","top","animateBackground","css","_loop","height","$question","val","id","q_type","resp","resp_id","loc_en","translateAnswer","saveData","lang","format","decodeURIComponent","tipo","respuesta","localizacion_en","status","document","ready","container","menu","addClass","index","slideDown","trigger","slideUp"],"mappings":"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","file":"./tour/scripts/tour.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n","export default function dataManager() {\n\tvar getObjFromLocalStorage = function (key) {\n\t\tvar jsonData = localStorage.getItem(key);\n\t\tif (jsonData == null) {\n\t\t\tjsonData = {};\n\t\t\tif(key == \"web2b\") { jsonData.respuestas = {}; }\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tjsonData = JSON.parse(jsonData);\n\t\t\t} catch (e) {\n\t\t\t\treturn jsonData;\n\t\t\t}\n\t\t}\n\t\treturn jsonData;\n\t};\n\tvar getPagesFromDB = function () {\n\t\tlet userId = getObjFromLocalStorage(\"web2b_userId\");\n\t\treturn $.get(\"scripts/getActualPages.php\", {\n\t\t\tuserId: userId\n\t\t}).done(function (result) {\n\t\t\tif (!result.ok) {\n\t\t\t\tconsole.log(\"Algo sali贸 mal. Por favor intentalo de nuevo mas tarde. \" + result.mensaje);\n\t\t\t}\n\t\t\treturn result.paginas;\n\t\t}).fail(function (result) {\n\t\t\tconsole.log(\"Algo sali贸 mal. Por favor intentalo de nuevo mas tarde. \" + result);\n\t\t\treturn {};\n\t\t});\n\t};\n\tvar saveWeb2bJson = function (jd) {\n\t\tlet strJD = JSON.stringify(jd),\n\t\t\tuserId = getObjFromLocalStorage(\"web2b_userId\"),\n\t\t\tidSitio = getObjFromLocalStorage(\"web2b_templateId\"),\n\t\t\tsavedJD = localStorage.getItem(\"web2b_template\");\n\t\tif (strJD && savedJD != strJD && !(userId instanceof Object) && !(idSitio instanceof Object)) {\n\t\t\tlocalStorage.setItem(\"web2b_template\", strJD);\n\t\t\t$.post(\"scripts/salvar_datos.php\", {\n\t\t\t\tuserId: userId,\n\t\t\t\tidSitio: idSitio,\n\t\t\t\tinfo: encodeURIComponent(strJD)\n\t\t\t}).done(function (result) {\n\t\t\t\tif (!result.ok) {\n\t\t\t\t\tconsole.log(\"Algo sali贸 mal. Por favor intentalo de nuevo mas tarde. \" + result.mensaje);\n\t\t\t\t}\n\t\t\t}).fail(function (result) {\n\t\t\t\tconsole.log(\"Algo sali贸 mal. Por favor intentalo de nuevo mas tarde. \" + result);\n\t\t\t});\n\t\t}\n\t};\n\tvar saveSelected = function (jd, name, value, type) {\n\t\tlet selections = jd.selections || {};\n\t\tlet isSwitch = false;\n\t\tif(name.includes(\"@switch\")) {\n\t\t\tlet arr = name.split(\"@\");\n\t\t\tname = arr[0];\n\t\t\tisSwitch = true;\n\t\t} \n\t\tselections[name] = selections[name] || {};\n\t\tswitch (type) {\n\t\t\tcase 'image':\n\t\t\t\tif(isSwitch) {\n\t\t\t\t\tselections[name].active = value;\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tselections[name].img = value;\n\t\t\t\t}\t\t\t\t\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tif(isSwitch) {\n\t\t\t\t\tselections[name].active = value;\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tselections[name].text = value;\n\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t\tcase 'config':\n\t\t\t\tselections[name].value = value;\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t}\n\t\t//Save selection to object\n\t\tjd.selections = selections;\n\t};\n\tvar setDataObjects = function (data, jd) {\n\t\tlocalStorage.removeItem(\"web2b\");\n\t\tlocalStorage.setItem(\"web2b_templateId\", data.idSitio);\n\t\tlocalStorage.setItem(\"web2b_userId\", data.userId);\n\t\tlocalStorage.setItem(\"web2b_template\", JSON.stringify(jd));\n\t\tlocalStorage.setItem(\"web2b_pages\", JSON.stringify(data.paginas));\n\t};\n\tvar purgeTemplateData = function () {\n\t\tlocalStorage.removeItem('web2b_actualPage');\n        localStorage.removeItem('web2b_template');\n        localStorage.removeItem('web2b_templateId');\n        localStorage.removeItem('web2b_template');\n        localStorage.removeItem(\"web2b\");\n\t}\n\treturn {\n\t\tgetObjFromLocalStorage: getObjFromLocalStorage,\n\t\tsaveWeb2bJson: saveWeb2bJson,\n\t\tsaveSelected: saveSelected,\n\t\tgetPagesFromDB: getPagesFromDB,\n\t\tsetDataObjects: setDataObjects,\n\t\tpurgeTemplateData: purgeTemplateData\n\t};\n}","export default function modal() {\n    var $modal = null;\n    var $close = null;\n    var $overlay = null;\n    var init = function (ide){\n        $modal = $(ide);\n        if ($modal.find(\"#modal-close\").length > 0) { setCloseButton(); }\n        if ($modal.find(\"#modal-overlay\").length > 0) { setOverlay(); }\n    }\n    var setCloseButton = function () {\n        $close = $((\"#modal-close\"));\n        $(\"body\").on(\"click\", \"#modal-close\", function () {\n            hide();\n        });\n    }\n    var setOverlay = function () {\n        $overlay = $((\"#modal-overlay\"));\n        $modal.before($overlay);\n    }\n    var hide = function (){\n        $modal.fadeOut(500).find(\".dialog\").hide();\n        if ($overlay) { $overlay.hide(); }\n    }\n    var show = function (ide){\n        $modal.hide().fadeIn(500).find(\".dialog\").hide().filter(ide).show();\n        if ($overlay) { $overlay.fadeIn(500); }\n    }\n    var hideErrorMessage = function () {\n        $(\".dialog-error:visible\").remove().detach();\n    }\n    var showErrorMessage = function ($target, cont, ide, mssg = undefined) {\n        if ($target.find(ide).length == 0) { $target.find(cont).after($(ide).clone()); }\n        if (mssg != undefined) { $target.find(ide).html(mssg); }\n        $target.find(ide).hide().fadeIn(\"fast\");\n    }\n    return {\n        init: init,\n        hide: hide,\n        hideErrorMessage: hideErrorMessage,\n        showErrorMessage: showErrorMessage,\n        show: show\n\t};\n};","import dataManager from '../../js/dataManager';\nimport menuSingleSelection from '../../js/menuSingleSelection';\nimport modal from '../../js/modal';\nexport default function Tour() {\n    var new_dataManager = new dataManager(); \n    var new_menuSingleSelection = new menuSingleSelection(); \n    var new_modal = new modal(); \n    var _tplData = new_dataManager.getObjFromLocalStorage(\"web2b\");\n    var current_step = 0;\n    var total_steps = $(\".stage\").length;\n    var init = function (){\n        new_menuSingleSelection.init(\".options-container\", \".options-group\");\n        new_modal.init(\"#modal\");\n        setTourNavigation();\n        new_modal.hide();\n        /*\n        ESTATUS:\n        Tour nuevo\n        Tour en proceso\n        Proyecto en proceso\n        */\n       var status = Object.keys(_tplData.respuestas).length == 0 ? \"NEW\" : \"IN PROCESS\";\n       status = Object.keys(new_dataManager.getObjFromLocalStorage('web2b_template')).length > 0 ? \"WITH PROJECT\" : status;\n       if (status == \"IN PROCESS\") { setDialogInProcess(); }   \n       if(status == \"WITH PROJECT\") { setDialogWithProject(); }\n    };\n    var setDialogInProcess = function() {\n        new_modal.show(\"#dialog-existing-session\");\n        $(\".iniciar\").on(\"click\", function() {\n            new_dataManager.purgeTemplateData();\n            _tplData = new_dataManager.getObjFromLocalStorage(\"web2b\")\n            new_modal.hide();\n        });\n        $(\".continuar\").on(\"click\", function() {\n            new_modal.hide();\n            current_step = Object.keys(_tplData.respuestas).length + 1;\n            if (current_step < 4) {\n                new_modal.hide();\n                showStep(current_step);\n            } else {\n                new_modal.show(\"#dialog-end\");\n            }\n        });\n    };\n    var setDialogWithProject = function() {\n        new_modal.show(\"#dialog-existing-project\");\n        $(\".continuar-proyecto\").click(function(){ location.href = \"/crea\"; }); \n        $(\".iniciar-proyecto\").click(function(){\n            new_dataManager.purgeTemplateData();\n            new_modal.hide();\n        });  \n    };\n    var setTourNavigation = function() {\n        $(\"a[href*='#stage-']\").on(\"click\", function() {\n            let $this = $(this);\n            if (checkAnswer($this.closest(\".question\").attr(\"id\"))) {\n                current_step = $this.attr(\"href\").replace(\"#stage-\", \"\") * 1;\n                if (current_step < 4) {\n                    showStep(current_step);\n                } else {\n                    new_modal.show(\"#dialog-end\");\n                }\n            }\n            return false;\n        });\n    };\n    var showStep = function(step) {\n        new_modal.hide();\n        var delay = 0;\n        if(step == 1) {\n            delay = 500;\n            $(\"#item-spaceman\").animate({\"left\" : \"50%\", \"opacity\" : \"0\", \"width\" : \"1rem\"}, 300);\n            $(\"#item-rocket\").animate({ \"bottom\" : \"1rem\" }, 300);\n        }\n        $(\"#item-rocket>img:last\").animate({ \"opacity\" : 1 }, 300);\n        setTimeout(function() {\n            $(\".stage:visible\").animate({\"top\" : \"100%\", \"bottom\" : \"-100%\"}, 1000);\n            animateBackground();\n            setTimeout(function() {\n                $(\".stage\").hide().filter(\":eq(\" + step + \")\").show().css({ \"top\" : \"-100%\", \"bottom\" : \"100%\" }).animate({ \"top\" : \"0\", \"bottom\" : 0 }, 1000);\n            }, 2000);\n            setTimeout(function() {\n                new_modal.show(\"#dialog-question-\" + current_step);\n                $(\"#item-rocket>img:last\").animate({ \"opacity\" : 0 }, 300);\n            }, 3000);\n        }, delay);        \n    };\n    var animateBackground = function (){\n        for (let i = 1; i < 4; i++) {\n            $(\".stars\" + i).animate({\"height\" : ((i * 15) + \"px\"), \"opacity\" : (.8 - (i * .2))}, 1000, function() {\n                setTimeout(function() {\n                    $(\".stars\" + i).animate({\"height\" : (i + \"px\"), \"opacity\" : \"1\"}, 1000);\n                }, 1000);\n            });\n        }\n    };\n    var checkAnswer = function (s){\n        if (s == 'undefined') {\n            return true;\n        } else {\n            var $question = $(\"#\" + s) \n            var answer_exists = ($question.find(\"input:checked\").length > 0) || ($question.find(\"input.otra\").val() != \"\");\n            if (answer_exists) {\n                new_modal.hideErrorMessage();\n                let id = $question.find(\"h3\").data(\"id\");\n                let q_type = $question.find(\"h3\").data(\"type\");\n                \n                let resp = \"\";\n                let resp_id = \"\";\n                let loc_en = \"\";\n\n                if ($question.find(\"input:checked\").length > 0) {\n                    resp = $question.find(\"input:checked\").val();\n                    resp_id = $question.find(\"input:checked\").attr(\"data-id\");\n                    loc_en = $question.find(\"input:checked\").attr(\"data-loc-en\");\n                }    \n                if($question.find(\"input.otra\").val() != \"\") { resp = $question.find(\"input.otra\").val(); }\n                if (loc_en == '' && q_type == 6) {\n                    translateAnswer(id, q_type, resp, loc_en, resp_id);\n                } else {\n                    saveData(id, q_type, resp, loc_en, resp_id);\n                }\n                return true;\n            } else{\n                new_modal.showErrorMessage($question, \"h3\", \"#error-no-answer\");\n                return false;\n            }\n        }\n    };\n    var translateAnswer = function(id, q_type, resp, loc_en, resp_id) {\n        $.get(\"https://translate.yandex.net/api/v1.5/tr.json/translate\",\n            {\n                key: 'trnsl.1.1.20180912T220603Z.70993d2fcf04258e.5e48efdba36505f0de87ff86f3ed40548d14a2e2',\n                lang: 'es-en',\n                text: resp,\n                format: 'plain'\n            }\n        ).done(function(data) {\n            if(data){\n                saveData(id, q_type, resp, decodeURIComponent(data.text[0]), resp_id);\n            }\n        });\t\n    };\n    var saveData = function (id, q_type, resp, loc_en, resp_id){\n        _tplData.respuestas[id] = {\n            \"tipo\": q_type,\n            \"respuesta\" : resp,\n            \"localizacion_en\" : loc_en,\n            \"resp_id\" : resp_id\n        };\n        localStorage.setItem(\"web2b\", JSON.stringify(_tplData));\n    };\n    return {\n\t\tinit: init\n\t};\n}\n\n$(document).ready(function(){\n    var new_tour = new Tour();\n    new_tour.init();\n}); ","export default function menuSingleSelection() {\n    var init = function (container, menu){\n        $(menu).hide();\n        $(container).find(\".toggle\").addClass(\"clickable\").attr(\"data-state\", \"off\");\n        $(container).find(\".show-less\").hide();\n        $(container).find(\".toggle\").on(\"click\", function() {\n            let $this = $(this);\n            let index = $this.closest(container).find(\".toggle\").index($this);\n                \n            if ($this.attr(\"data-state\") == \"off\") {\n                $(container).find(\".toggle\").attr(\"data-state\", \"off\").filter(\":eq(\" + index + \")\").attr(\"data-state\", \"on\");\n                $(container).find(\".toggle .show-less\").hide();\n                $(container).find(\".toggle .show-more\").show();\n                $this.find(\".show-more\").hide();\n                $this.find(\".show-less\").show();\n                $this.closest(container).find(menu).hide().filter(menu + \":eq(\" + index + \")\").slideDown(\"fast\");\n                $this.closest(container).find(menu + \":eq(\" + index + \") input:first\").trigger(\"click\");\n            } else {\n                $this.attr(\"data-state\", \"off\");\n                $this.find(\".show-less\").hide();\n                $this.find(\".show-more\").show();\n                $this.closest(container).find(menu + \":eq(\" + index + \")\").slideUp(\"fast\");\n            }\n        });\n    }\n    return {\n\t\tinit: init\n\t};\n};"],"sourceRoot":""}