{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/dataManager.js","webpack:///./js/pageManager.js","webpack:///./landing/js/scripts.js","webpack:///./js/modal.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getObjFromLocalStorage","jsonData","localStorage","getItem","respuestas","JSON","parse","e","saveWeb2bJson","jd","strJD","stringify","userId","idSitio","savedJD","setItem","$","post","info","encodeURIComponent","done","result","ok","console","log","mensaje","fail","saveSelected","type","selections","isSwitch","includes","arr","split","active","img","text","getPagesFromDB","paginas","setDataObjects","data","removeItem","purgeTemplateData","new_Datamanager","dataManager","setPaginasInfoFromExternal","getPaginas","then","templateId","forEach","Number","fillModal","callback","html","actualPage","length","decodeURIComponent","nombre","siteName","remove","append","hide","show","click","pags","pagina","val","css","hasPages","document","ready","new_modal","modal","isEmail","email","test","init","on","top","this","attr","offset","stop","animate","scrollTop","undefined","web2b_template","web2b_pages","preventDefault","submit","hideErrorMessage","trim","showErrorMessage","correo","password","response","window","location","href","new_PageManager","pageManager","error","always","$modal","$overlay","setCloseButton","setOverlay","before","fadeOut","find","ide","detach","$target","cont","mssg","arguments","after","clone","fadeIn","filter"],"mappings":"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","file":"./landing/js/landing.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","export default function dataManager() {\n\tvar getObjFromLocalStorage = function (key) {\n\t\tvar jsonData = localStorage.getItem(key);\n\t\tif (jsonData == null) {\n\t\t\tjsonData = {};\n\t\t\tif(key == \"web2b\") { jsonData.respuestas = {}; }\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tjsonData = JSON.parse(jsonData);\n\t\t\t} catch (e) {\n\t\t\t\treturn jsonData;\n\t\t\t}\n\t\t}\n\t\treturn jsonData;\n\t};\n\tvar getPagesFromDB = function () {\n\t\tlet userId = getObjFromLocalStorage(\"web2b_userId\");\n\t\treturn $.get(\"scripts/getActualPages.php\", {\n\t\t\tuserId: userId\n\t\t}).done(function (result) {\n\t\t\tif (!result.ok) {\n\t\t\t\tconsole.log(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + result.mensaje);\n\t\t\t}\n\t\t\treturn result.paginas;\n\t\t}).fail(function (result) {\n\t\t\tconsole.log(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + result);\n\t\t\treturn {};\n\t\t});\n\t};\n\tvar saveWeb2bJson = function (jd) {\n\t\tlet strJD = JSON.stringify(jd),\n\t\t\tuserId = getObjFromLocalStorage(\"web2b_userId\"),\n\t\t\tidSitio = getObjFromLocalStorage(\"web2b_templateId\"),\n\t\t\tsavedJD = localStorage.getItem(\"web2b_template\");\n\t\tif (strJD && savedJD != strJD && !(userId instanceof Object) && !(idSitio instanceof Object)) {\n\t\t\tlocalStorage.setItem(\"web2b_template\", strJD);\n\t\t\t$.post(\"scripts/salvar_datos.php\", {\n\t\t\t\tuserId: userId,\n\t\t\t\tidSitio: idSitio,\n\t\t\t\tinfo: encodeURIComponent(strJD)\n\t\t\t}).done(function (result) {\n\t\t\t\tif (!result.ok) {\n\t\t\t\t\tconsole.log(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + result.mensaje);\n\t\t\t\t}\n\t\t\t}).fail(function (result) {\n\t\t\t\tconsole.log(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + result);\n\t\t\t});\n\t\t}\n\t};\n\tvar saveSelected = function (jd, name, value, type) {\n\t\tlet selections = jd.selections || {};\n\t\tlet isSwitch = false;\n\t\tif(name.includes(\"@switch\")) {\n\t\t\tlet arr = name.split(\"@\");\n\t\t\tname = arr[0];\n\t\t\tisSwitch = true;\n\t\t} \n\t\tselections[name] = selections[name] || {};\n\t\tswitch (type) {\n\t\t\tcase 'image':\n\t\t\t\tif(isSwitch) {\n\t\t\t\t\tselections[name].active = value;\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tselections[name].img = value;\n\t\t\t\t}\t\t\t\t\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tif(isSwitch) {\n\t\t\t\t\tselections[name].active = value;\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tselections[name].text = value;\n\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t\tcase 'config':\n\t\t\t\tselections[name].value = value;\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t}\n\t\t//Save selection to object\n\t\tjd.selections = selections;\n\t};\n\tvar setDataObjects = function (data, jd) {\n\t\tlocalStorage.removeItem(\"web2b\");\n\t\tlocalStorage.setItem(\"web2b_templateId\", data.idSitio);\n\t\tlocalStorage.setItem(\"web2b_userId\", data.userId);\n\t\tlocalStorage.setItem(\"web2b_template\", JSON.stringify(jd));\n\t\tlocalStorage.setItem(\"web2b_pages\", JSON.stringify(data.paginas));\n\t};\n\tvar purgeTemplateData = function () {\n\t\tlocalStorage.removeItem('web2b_actualPage');\n        localStorage.removeItem('web2b_template');\n        localStorage.removeItem('web2b_templateId');\n        localStorage.removeItem('web2b_template');\n        localStorage.removeItem(\"web2b\");\n\t}\n\treturn {\n\t\tgetObjFromLocalStorage: getObjFromLocalStorage,\n\t\tsaveWeb2bJson: saveWeb2bJson,\n\t\tsaveSelected: saveSelected,\n\t\tgetPagesFromDB: getPagesFromDB,\n\t\tsetDataObjects: setDataObjects,\n\t\tpurgeTemplateData: purgeTemplateData\n\t};\n}","\n\nimport dataManager from \"./dataManager\";\n\nexport default function pageManager(){\n    let paginas = [],\n        new_Datamanager = new dataManager();\n\n    let setPaginasInfoFromExternal = function(p){\n        paginas = p;\n    };\n\n    let getPaginas = function() {\n      return new_Datamanager.getPagesFromDB().then((p) => {\n            let templateId = new_Datamanager.getObjFromLocalStorage(\"web2b_templateId\");\n            paginas = p.paginas;\n            localStorage.setItem(\"web2b_pages\", JSON.stringify(p.paginas));\n            p.paginas.forEach((value) => {\n                if(Number(value.idSitio) === templateId) {\n                    localStorage.setItem(\"web2b_actualPage\", JSON.stringify(value));\n                }\n            });                          \n        });               \n    };\n\n    let fillModal = function(userId, callback){\n        // manejar varias paginas de un solo usuario??\n        let html = \"\";\n        let actualPage = new_Datamanager.getObjFromLocalStorage(\"web2b_actualPage\");\n        for(let i=0, jd; i < paginas.length; i++){\n            // if(paginas[i].idSitio === actualPage.idSitio) continue;\n            jd = JSON.parse(decodeURIComponent(paginas[i].info));\n            let name = jd.nombre || jd.selections.siteName.text || \"no name\";\n            if(paginas[i].idSitio === actualPage.idSitio) name = name + '(Proyecto actual)';\n            html += \n            `<option class=\"inserted\" value=\"${i}\">\n                ${name}\n            </option>`;\n        }\t\t\t\t\t\t\n        $(\".proyectos-disponibles .inserted\").remove();\t\t\t\t\t\t\t\t\t\n        $(\".proyectos-disponibles\").append(html);\n        $(\".ventana-login > form\").hide();\n        $(\".login-paginas\").show();\n        $(\".llevame\").click({\n            pags: paginas,\n            userId: userId\n        },function(e){\n            let pagina = $(\".proyectos-disponibles option:selected\" ).val(),\n                d = e.data;\n            if(pagina != \"\"){\n                localStorage.setItem(\"web2b_template\", decodeURIComponent(d.pags[pagina].info));\n                localStorage.setItem(\"web2b_templateId\", d.pags[pagina].idSitio);\n                localStorage.setItem(\"web2b_userId\", d.userId);\n                localStorage.setItem(\"web2b_pages\", JSON.stringify(d.pags));\n                localStorage.setItem(\"web2b_actualPage\", JSON.stringify(d.pags[pagina]));        \n                callback();\n            } else {\n                $(\".login-paginas .form-error\").css(\"display\",\"block\");\n            }\n        });\n    };\n\n    let hasPages = function(){\n        return paginas.length > 1 ? true : false;\n    };\n\n    return{\n        setPaginasInfoFromExternal: setPaginasInfoFromExternal,\n        getPaginas: getPaginas,\n        fillModal: fillModal,\n        hasPages: hasPages\n    };\n}","\nimport pageManager from '../../js/pageManager';\n\nimport modal from '../../js/modal';\n$(document).ready(function() {\n\tvar new_modal = new modal();\n\tnew_modal.init(\"#modal\");\n\tnew_modal.hide();\n\n\t/* */\n\t$(\"a[href^='#']\").on(\"click\", function() {\n\t\tvar top = $($(this).attr(\"href\")).offset().top;\n\t\tconsole.log(top);\n\t\t$(\"html, body\").stop().animate({\n\t\t\t\t\t\t\t\tscrollTop : (top - 55)\n\t\t\t\t\t\t\t}, 500, 'swing');\n\t\t\n\t\treturn false;\n\t});\n\n\tif(localStorage.web2b_template !== undefined && localStorage.web2b_pages !== undefined) {\n\t\t$('.panel').show();\n\t\t$('.login-btn').hide();\n\t}\n\n\tfunction isEmail(email) {\n\t\tvar regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n\t\treturn regex.test(email);\n\t}\n\t\n\t$(\".login-btn\").click(function(e){\n\t\te.preventDefault();\n\t\t$(\"#email\").val(\"\");\n\t\t$(\"#password\").val(\"\");\n\t\tnew_modal.show(\"#dialog-login\");\n\t});\t\n\t\n\t$(\"#form-login\").submit(function(e){\n\t\te.preventDefault();\n\t\tnew_modal.hideErrorMessage();\n\t\tif($(\"#email\").val().trim() == \"\" || !isEmail($(\"#email\").val())){\n\t\t\tnew_modal.showErrorMessage($(\"#dialog-login\"), \"#inp-email\", \"#error-malformed-email\");\n\t\t} if(!$(\"#password\").val().trim()){\n\t\t\tnew_modal.showErrorMessage($(\"#dialog-login\"), \"#inp-password\", \"#error-malformed-password\");\n\t\t} else {\n\t\t\t$.post(\"/landing/scripts/login.php\",{\n\t\t\t\tcorreo: $(\"#email\").val().trim(),\t\t\t\t\t\n\t\t\t\tpassword: $(\"#password\").val()\n\t\t\t}).done(function(response){\n\t\t\t\tif(response.ok && response.paginas.length > 0){\n\t\t\t\t\t// si solo tiene una pagina\n\t\t\t\t\tif(response.paginas.length == 1) {\n\t\t\t\t\t\t//mostrar usuarios\n\t\t\t\t\t\tlocalStorage.setItem(\"web2b_template\", decodeURIComponent(response.paginas[0].info));\n\t\t\t\t\t\tlocalStorage.setItem(\"web2b_templateId\", response.paginas[0].idSitio);\n\t\t\t\t\t\tlocalStorage.setItem(\"web2b_userId\", response.userId);\n\t\t\t\t\t\tlocalStorage.setItem(\"web2b_actualPage\", response.paginas[0]);\n\t\t\t\t\t\twindow.location.href = \"/crea\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"Page Manager\");\n\t\t\t\t\t\t/* */\n\t\t\t\t\t\t// show pages and redirect on success\n\t\t\t\t\t\tnew_modal.show(\"#dialog-project-switcher\");\n\t\t\t\t\t\tlet new_PageManager = new pageManager();\n\t\t\t\t\t\tnew_PageManager.setPaginasInfoFromExternal(response.paginas);\n\t\t\t\t\t\tnew_PageManager.fillModal(response.userId, () => {\n\t\t\t\t\t\t\twindow.location.href = \"/crea\";\n\t\t\t\t\t\t});\n\t\t\t\t\t\t/**/\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnew_modal.showErrorMessage($(\"#dialog-login\"), \"#inp-password\", \"#error-login\", response.error);\n\t\t\t\t}\n\t\t\t}).fail(function(response){\n\t\t\t\tconsole.log(response);\n\t\t\t}).always(function(){\n\t\t\t\t$(\".login-content .form-error\").hide();\n\t\t\t});\n\t\t}\n\t});\t\n\t/*COMPLETE EMAIL SUBSCRIPTION*/\n\t$(\".comingsoon\").click(function() {\n\t\tvar email = $(\"#input-email-subscribe\").val();\n\t\tif(isEmail(email)) {\n\t\t\t$.post(\"/landing/scripts/emailSubscriptions.php\",{\n\t\t\t\tcorreo: email.trim()\n\t\t\t}).done(function(response){\n\t\t\t\tconsole.log(response);\n\t\t\t}).fail(function(response){\n\t\t\t\tconsole.log(response);\n\t\t\t}).always(function(){\n\t\t\t\t\n\t\t\t});\n\t\t} else {\n\t\t\tconsole.log(\"error\");\n\t\t}\n\t\treturn false;\n\t});\n\t/*COMPLETE EMAIL SUBSCRIPTION*/\n});","export default function modal() {\n    var $modal = null;\n    var $close = null;\n    var $overlay = null;\n    var init = function (ide){\n        $modal = $(ide);\n        if ($modal.find(\"#modal-close\").length > 0) { setCloseButton(); }\n        if ($modal.find(\"#modal-overlay\").length > 0) { setOverlay(); }\n    }\n    var setCloseButton = function () {\n        $close = $((\"#modal-close\"));\n        $(\"body\").on(\"click\", \"#modal-close\", function () {\n            hide();\n        });\n    }\n    var setOverlay = function () {\n        $overlay = $((\"#modal-overlay\"));\n        $modal.before($overlay);\n    }\n    var hide = function (){\n        $modal.fadeOut(500).find(\".dialog\").hide();\n        if ($overlay) { $overlay.hide(); }\n    }\n    var show = function (ide){\n        $modal.hide().fadeIn(500).find(\".dialog\").hide().filter(ide).show();\n        if ($overlay) { $overlay.fadeIn(500); }\n    }\n    var hideErrorMessage = function () {\n        $(\".dialog-error:visible\").remove().detach();\n    }\n    var showErrorMessage = function ($target, cont, ide, mssg = undefined) {\n        if ($target.find(ide).length == 0) { $target.find(cont).after($(ide).clone()); }\n        if (mssg != undefined) { $target.find(ide).html(mssg); }\n        $target.find(ide).hide().fadeIn(\"fast\");\n    }\n    return {\n        init: init,\n        hide: hide,\n        hideErrorMessage: hideErrorMessage,\n        showErrorMessage: showErrorMessage,\n        show: show\n\t};\n};"],"sourceRoot":""}