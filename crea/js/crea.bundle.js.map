{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/dataManager.js","webpack:///./js/pageManager.js","webpack:///./crea/js/pp.js","webpack:///./crea/js/scripts.js","webpack:///./crea/js/creator.js","webpack:///./crea/js/colorManager.js","webpack:///./crea/js/imageManager.js","webpack:///./crea/js/tooltipManager.js","webpack:///./crea/js/itemManager.js","webpack:///./crea/js/templateManager.js","webpack:///./crea/js/appManager.js","webpack:///./crea/js/menuManager.js","webpack:///./crea/js/paymentsManager.js","webpack:///./crea/js/utilsManager.js","webpack:///./crea/js/validator.js","webpack:///./crea/js/userValidator.js","webpack:///./crea/js/mapsManager.js","webpack:///./node_modules/load-google-maps-api/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getObjFromLocalStorage","jsonData","localStorage","getItem","respuestas","JSON","parse","e","saveWeb2bJson","jd","strJD","stringify","userId","idSitio","savedJD","setItem","$","post","info","encodeURIComponent","done","result","ok","console","log","mensaje","fail","saveSelected","type","selections","isSwitch","includes","arr","split","active","img","text","getPagesFromDB","paginas","setDataObjects","data","removeItem","purgeTemplateData","new_Datamanager","dataManager","setPaginasInfoFromExternal","getPaginas","then","templateId","forEach","Number","fillModal","callback","html","actualPage","length","decodeURIComponent","nombre","siteName","remove","append","hide","show","click","pags","pagina","val","css","hasPages","_this","this","new_dataManager","paquetes","basico","description","precio","premium","init","element","tipo","subtotal","tax","toFixed","toString","total","paypal","Button","render","env","client","sandbox","production","locale","style","label","size","shape","color","tagline","layout","fundingicons","funding","allowed","FUNDING","CARD","disallowed","CREDIT","commit","payment","actions","transactions","amount","currency","details","item_list","items","quantity","price","note_to_payer","onAuthorize","execute","PaymentDetails","id_pagina","id_usuario","template_info","info_pago","paquete","search","id_paypal","id","PagoResult","site_name","contenido","outerHTML","title","PublishResult","dialog","fecha","empty","attr","new_paypalBtn2","paypalBtn","new_paypalBtn1","today","Date","finArr","fin","diff","Math","ceil","abs","fadeIn","manageFinalData","onCancel","onError","err","new_creator","creator","validation","document","ready","sessionStatus","current_step","lastKeyPressed","jd_templateId","new_colorManager","colorManager","new_imageManager","imageManager","new_itemManager","itemManager","new_templateManager","templateManager","new_appManager","appManager","new_menuManager","menuManager","new_paymentsManager","paymentsManager","new_utilsManager","utilsManager","new_userValidator","userValidator","new_mapManager","mapsManager","new_tooltipManager","tooltipManager","new_PageManager","pageManager","new_validator","validator","web2b","web2bTemplate","keys","location","href","setUserValidation","setApp","loadTemplate","afterTemplateLoad","setTooltips","createPaypalButtons","_ctrl","_color_hex","_palettes","light","dark","grey","impact","colorful","_palette","setPalettes","k","$control_color","clone","removeClass","find","_that","updateColor","$template","addClass","replace","url","load","_uploaded_images","_loaded_images","_current_images","getImagesUploadedByUser","indexOf","obj","push","loadImagesFromUnsplash","ide","Promise","resolve","reject","api_path","params","results","Error","onImagesLoaded","x","urls","regular","links","download_location","user","sortImages","image_types","jd_images","j","concat","add_image","setUploadedImage","cont","selected","index","$img_thumb","setBackgroundImage","autor_name","$this_img_thumb","prepend","saveImageInStorage","isGallery","pre","displayImageOnTemplate","$img","filter","arguments","undefined","setImageSelection","setImagesOnStartSession","each","img_src","setImagesOnResumeSession","hideTemplateElements","hideFormElements","detach","imgs_str","imgs_arr","setImagesOnUpdateSession","target","$this","is","org_img","n_name","downloadUrl","autorUrl","autor","prop","closest","gallery_arr","splice","new_arr","join","first","uploadImage","preventDefault","parent","currentTarget","f","formData","FormData","files","ajax","cache","contentType","processData","res","upload","texto","always","before","$target","next","_number_of_items","_type_of_item","addItemControl","$i_t","i_t","i_c","addItemToTemplate","items_in_template","after","$item_copy","setItems","addItem","trigger","setContentType","v","getCurrentStep","updateContent","updateTexts","updateImages","updateRemoveControls","i_id","v_id","slogan_from_tour","respuesta","updateSpecificFields","validateFields","hasClass","has","selector","dir","toLowerCase","sec","templateChanged","templateTypeId","removeAttr","$newInp","content_id","resp_id","src","localizacion_en","dataType","start","setMenu","test","navigator","userAgent","setTimeout","on","createPayment","reload","clear","publishPagina","actual_page","fecha_fin","fecha_diff","setMainControls","toggleClass","inc","totalSteps","goToStep","setFormControls","body","keyCode","which","toggle","not","$parent","actualNum","an","img_url","file","$s","step","template_html","trim","lenght","isValidinput","regex","RegExp","isEmail","email","isValidDomain","validPassword","password","openLoginDialog","formatValue","autoOpen","modal","effect","duration","closeOnEscape","userid","fadeOut","np","npfmt","correo","error","response","responseText","inputId","mapId","autocomplete","initAutocomplete","_loadGoogleMapsApi2","default","libraries","googleMaps","places","Autocomplete","getElementById","addListener","fillInAddress","inputMap","catch","place","getPlace","place_id","updateMapSrc","query","map","ipLookUp","lat","lon","status","getInitialPos","geolocation","getCurrentPosition","position","coords","latitude","longitude","error_message","input","CALLBACK_NAME","optionsKeys","promise","options","timeoutId","window","timeout","clearTimeout","google","maps","scriptElement","createElement","apiUrl","appendChild"],"mappings":"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","file":"./crea/js/crea.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","export default function dataManager() {\n\tvar getObjFromLocalStorage = function (key) {\n\t\tvar jsonData = localStorage.getItem(key);\n\t\tif (jsonData == null) {\n\t\t\tjsonData = {};\n\t\t\tif(key == \"web2b\") { jsonData.respuestas = {}; }\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tjsonData = JSON.parse(jsonData);\n\t\t\t} catch (e) {\n\t\t\t\treturn jsonData;\n\t\t\t}\n\t\t}\n\t\treturn jsonData;\n\t};\n\tvar getPagesFromDB = function () {\n\t\tlet userId = getObjFromLocalStorage(\"web2b_userId\");\n\t\treturn $.get(\"scripts/getActualPages.php\", {\n\t\t\tuserId: userId\n\t\t}).done(function (result) {\n\t\t\tif (!result.ok) {\n\t\t\t\tconsole.log(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + result.mensaje);\n\t\t\t}\n\t\t\treturn result.paginas;\n\t\t}).fail(function (result) {\n\t\t\tconsole.log(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + result);\n\t\t\treturn {};\n\t\t});\n\t};\n\tvar saveWeb2bJson = function (jd) {\n\t\tlet strJD = JSON.stringify(jd),\n\t\t\tuserId = getObjFromLocalStorage(\"web2b_userId\"),\n\t\t\tidSitio = getObjFromLocalStorage(\"web2b_templateId\"),\n\t\t\tsavedJD = localStorage.getItem(\"web2b_template\");\n\t\tif (strJD && savedJD != strJD && !(userId instanceof Object) && !(idSitio instanceof Object)) {\n\t\t\tlocalStorage.setItem(\"web2b_template\", strJD);\n\t\t\t$.post(\"scripts/salvar_datos.php\", {\n\t\t\t\tuserId: userId,\n\t\t\t\tidSitio: idSitio,\n\t\t\t\tinfo: encodeURIComponent(strJD)\n\t\t\t}).done(function (result) {\n\t\t\t\tif (!result.ok) {\n\t\t\t\t\tconsole.log(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + result.mensaje);\n\t\t\t\t}\n\t\t\t}).fail(function (result) {\n\t\t\t\tconsole.log(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + result);\n\t\t\t});\n\t\t}\n\t};\n\tvar saveSelected = function (jd, name, value, type) {\n\t\tlet selections = jd.selections || {};\n\t\tlet isSwitch = false;\n\t\tif(name.includes(\"@switch\")) {\n\t\t\tlet arr = name.split(\"@\");\n\t\t\tname = arr[0];\n\t\t\tisSwitch = true;\n\t\t} \n\t\tselections[name] = selections[name] || {};\n\t\tswitch (type) {\n\t\t\tcase 'image':\n\t\t\t\tif(isSwitch) {\n\t\t\t\t\tselections[name].active = value;\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tselections[name].img = value;\n\t\t\t\t}\t\t\t\t\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t\tcase 'text':\n\t\t\t\tif(isSwitch) {\n\t\t\t\t\tselections[name].active = value;\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\tselections[name].text = value;\n\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t\tcase 'config':\n\t\t\t\tselections[name].value = value;\n\t\t\t\tselections[name].type = type;\n\t\t\t\tbreak;\n\t\t}\n\t\t//Save selection to object\n\t\tjd.selections = selections;\n\t};\n\tvar setDataObjects = function (data, jd) {\n\t\tlocalStorage.removeItem(\"web2b\");\n\t\tlocalStorage.setItem(\"web2b_templateId\", data.idSitio);\n\t\tlocalStorage.setItem(\"web2b_userId\", data.userId);\n\t\tlocalStorage.setItem(\"web2b_template\", JSON.stringify(jd));\n\t\tlocalStorage.setItem(\"web2b_pages\", JSON.stringify(data.paginas));\n\t};\n\tvar purgeTemplateData = function () {\n\t\tlocalStorage.removeItem('web2b_actualPage');\n        localStorage.removeItem('web2b_template');\n        localStorage.removeItem('web2b_templateId');\n        localStorage.removeItem('web2b_template');\n        localStorage.removeItem(\"web2b\");\n\t}\n\treturn {\n\t\tgetObjFromLocalStorage: getObjFromLocalStorage,\n\t\tsaveWeb2bJson: saveWeb2bJson,\n\t\tsaveSelected: saveSelected,\n\t\tgetPagesFromDB: getPagesFromDB,\n\t\tsetDataObjects: setDataObjects,\n\t\tpurgeTemplateData: purgeTemplateData\n\t};\n}","\n\nimport dataManager from \"./dataManager\";\n\nexport default function pageManager(){\n    let paginas = [],\n        new_Datamanager = new dataManager();\n\n    let setPaginasInfoFromExternal = function(p){\n        paginas = p;\n    };\n\n    let getPaginas = function() {\n      return new_Datamanager.getPagesFromDB().then((p) => {\n            let templateId = new_Datamanager.getObjFromLocalStorage(\"web2b_templateId\");\n            paginas = p.paginas;\n            localStorage.setItem(\"web2b_pages\", JSON.stringify(p.paginas));\n            p.paginas.forEach((value) => {\n                if(Number(value.idSitio) === templateId) {\n                    localStorage.setItem(\"web2b_actualPage\", JSON.stringify(value));\n                }\n            });                          \n        });               \n    };\n\n    let fillModal = function(userId, callback){\n        // manejar varias paginas de un solo usuario??\n        let html = \"\";\n        let actualPage = new_Datamanager.getObjFromLocalStorage(\"web2b_actualPage\");\n        for(let i=0, jd; i < paginas.length; i++){\n            // if(paginas[i].idSitio === actualPage.idSitio) continue;\n            jd = JSON.parse(decodeURIComponent(paginas[i].info));\n            let name = jd.nombre || jd.selections.siteName.text || \"no name\";\n            if(paginas[i].idSitio === actualPage.idSitio) name = name + '(Proyecto actual)';\n            html += \n            `<option class=\"inserted\" value=\"${i}\">\n                ${name}\n            </option>`;\n        }\t\t\t\t\t\t\n        $(\".proyectos-disponibles .inserted\").remove();\t\t\t\t\t\t\t\t\t\n        $(\".proyectos-disponibles\").append(html);\n        $(\".ventana-login > form\").hide();\n        $(\".login-paginas\").show();\n        $(\".llevame\").click({\n            pags: paginas,\n            userId: userId\n        },function(e){\n            let pagina = $(\".proyectos-disponibles option:selected\" ).val(),\n                d = e.data;\n            if(pagina != \"\"){\n                localStorage.setItem(\"web2b_template\", decodeURIComponent(d.pags[pagina].info));\n                localStorage.setItem(\"web2b_templateId\", d.pags[pagina].idSitio);\n                localStorage.setItem(\"web2b_userId\", d.userId);\n                localStorage.setItem(\"web2b_pages\", JSON.stringify(d.pags));\n                localStorage.setItem(\"web2b_actualPage\", JSON.stringify(d.pags[pagina]));        \n                callback();\n            } else {\n                $(\".login-paginas .form-error\").css(\"display\",\"block\");\n            }\n        });\n    };\n\n    let hasPages = function(){\n        return paginas.length > 1 ? true : false;\n    };\n\n    return{\n        setPaginasInfoFromExternal: setPaginasInfoFromExternal,\n        getPaginas: getPaginas,\n        fillModal: fillModal,\n        hasPages: hasPages\n    };\n}","import dataManager from \"../../js/dataManager\";\n\nexport default function paypalBtn() {\n\n  let element;\n  let subtotal;\n  let total;\n  let description;\n  let name;\n  let tax;\n\n  let new_dataManager = new dataManager();\n\n  let paquetes ={\n    'basico':\n      {\n        'nombre': 'Básico',\n        'description': `Sitio por un año,\n        Logotipo,\n        Agregar contenido,\n        Actualizaciones`,\n        'precio': '899'\n      },\n    'premium': \n      {\n        'nombre': 'Premium',\n        'description': `Dominio .com o .mx\n        Sitio por un año,\n        Logotipo,\n        Agregar contenido,\n        Actualizaciones`,\n        'precio':'1599'\n      }\n  };\n  \n\tvar manageFinalData= function(fecha, paquete) {\n\t\t$(\".app-cover-finish-package:first-child .finish\").css('visibility','hidden');\n    $('#paypal-button-container').empty();\n    $('#paypal-button-container').attr(\"style\",\"\");\n    $('#paypal-button-container2').empty();\n    $('#paypal-button-container2').attr(\"style\",\"\");\n\n\t\tif(paquete === 'premium') {\n\t\t\tlet new_paypalBtn2 = new paypalBtn();\n\t\t\tnew_paypalBtn2.init('#paypal-button-container2', 'premium');\t\n\t\t\t$('#paypal-button-container2').css('margin-bottom','0');\n\t\t} else {\n\t\t\tlet new_paypalBtn1 = new paypalBtn();\n\t\t\tnew_paypalBtn1.init('#paypal-button-container', 'basico');\n\t\t\tlet new_paypalBtn2 = new paypalBtn();\n\t\t\tnew_paypalBtn2.init('#paypal-button-container2', 'premium');\n\t\t\t$('#paypal-button-container').css('margin-bottom','0');\n\t\t\t$('#paypal-button-container2').css('margin-bottom','0');\n    }\n\t\t// number of days\n\t\tlet today = new Date();\n\t\tlet finArr = fecha.split(\"-\");\n\t\tlet fin = new Date(Number(finArr[0]), Number(finArr[1])-1,Number(finArr[2]));\n\t\tlet diff;\n\t\tif(fin >= today) {\n\t\t\tdiff = Math.ceil((Math.abs(today-fin)) / (1000 * 3600 * 24));\n\t\t\t$(\".daysLeft\").text(diff);\n\t\t\t$(\".created\").fadeIn(400);\n\t\t} else {\n\t\t\tdiff = 0;\n\t\t\t$(\".caduco\").fadeIn(400);\n\t\t\t$(\".created\").hide();\n\t\t}\t\n\t};\n  \n  let init = (element, tipo) => {\n    this.element = element;\n    this.subtotal = paquetes[tipo].precio;\n    this.tax = (Number(this.subtotal) * 0.16).toFixed(2).toString();\n    this.total = (Number(this.subtotal) * 1.16).toFixed(2).toString();\n    this.name = paquetes[tipo].nombre;\n    this.description = paquetes[tipo].description;\n    // Render the PayPal button\n    return paypal.Button.render({\n      // Set your environment\n      env: 'production', // sandbox | production\n      client: {\n        sandbox: 'AeYhV898LwB_wov8dDxwQeKLrx1Yegkzeldu8P5WNPgfxi-ic1-5qlFnL4LK0xlkdrISIc5NeVNVi-Y9',\n        production: 'Ab6PGV7NqDwbG9BNJ_2b0ttvuP53CaldZaLyn4YE2Pux_65VWHhL-IfbiYPQAkDayRzgu_3qAjHUkxUd'\n      },\n\n      locale: 'es_MX',\n\n      // Specify the style of the button\n      style: {\n        label: 'paypal',  // checkout | credit | pay | buynow | generic\n        size:  'responsive', // small | medium | large | responsive\n        shape: 'rect',   // pill | rect\n        color: 'blue',   // gold | blue | silver | black\n        tagline: false,\n        layout: 'horizontal',\n        fundingicons: true\n      },\n      \n      // Specify allowed and disallowed funding sources\n      //\n      // Options:\n      // - paypal.FUNDING.CARD\n      // - paypal.FUNDING.CREDIT\n      // - paypal.FUNDING.ELV\n      funding: {\n        allowed: [ paypal.FUNDING.CARD ],\n        disallowed: [ paypal.FUNDING.CREDIT ]\n      },\n\n      \n      // Enable Pay Now checkout flow (optional)\n      commit: true,\n      \n      // PayPal Client IDs - replace with your own\n      // Create a PayPal app: https://developer.paypal.com/developer/applications/create\n      \n      // Set up a payment\n      payment: (data, actions) => {\n        return actions.payment.create({\n          transactions: [{\n            amount: {\n              total: this.total,\n              currency: 'MXN',\n              details: {\n                subtotal: this.subtotal,\n                tax: this.tax\n              }                        \n            },\n            description: 'Paquete ' + this.name,\n            item_list:{\n              items: [\n                {\n                  name: 'Paquete ' + this.name,\n                  description: this.description,\n                  quantity: '1',\n                  price: this.subtotal,\n                  currency: 'MXN',\n                  tax: this.tax\n                }\n              ]\n            },\n          }],\n          note_to_payer: 'Contáctanos si necesitas ayuda en tu compra.'\n        });\n      },\n      \n      onAuthorize: (data, actions) => {\n        return actions.payment.execute()\n          .then((PaymentDetails) => {\n            let id_pagina = new_dataManager.getObjFromLocalStorage('web2b_templateId');\n            let id_usuario = new_dataManager.getObjFromLocalStorage('web2b_userId');\n            let template_info = new_dataManager.getObjFromLocalStorage('web2b_template');\n            let info_pago = JSON.stringify(PaymentDetails); \n            let paquete = PaymentDetails.transactions[0].item_list.items[0].name.search('Básico') != -1 ?\n              'basico' : 'premium';\n\n            //Crear pago\n            $.post(\"scripts/crear_pago.php\",{\n              id_usuario: id_usuario,\n              paquete: paquete,\n              info_pago: info_pago,\n              id_pagina: id_pagina,\n              id_paypal: PaymentDetails.id\n            }).done((PagoResult) => {\n              // Crear página\n              $.post(\"scripts/publicar_pagina.php\",{\n                site_name: template_info.selections.siteName.text,\n                contenido: $('#template')[0].outerHTML,\n                title: template_info.selections['inp-content-name'].text,\n                description: template_info.selections['inp-content-slogan'].text\n              }).done((PublishResult) => {\n                $('.final-msgs p').text('La página se ha publicado exitosamente');\n                $('.final-msgs').dialog(\"open\");\n                manageFinalData(PagoResult.fecha, paquete);\n              }).fail(function(result){\n                $('.final-msgs p').text('Algo ha salido al tratar de publicar tu página. Por favor, intenta más tarde');\n                $('.final-msgs').dialog(\"open\");\n              });               \n            }).fail(function(result){\n              // Algo salio mal\n            });            \n            \n          });\n      },\n\n      onCancel: (data, actions) => {\n        // Show a cancel page or return to cart\n      },\n\n      onError: (err) => {\n        // Show an error page here, when an error occurs\n      }\n\n    }, this.element);\n  };\n\n  return{\n    init: init\n  };\n\n}","import creator from \"./creator\";\nvar new_creator = new creator();\nnew_creator.validation();\n$(document).ready(function() {\t\n\tnew_creator.init();\n});","import colorManager from \"./colorManager\";\nimport imageManager from \"./imageManager\";\nimport tooltipManager from \"./tooltipManager\";\nimport itemManager from \"./itemManager\";\nimport templateManager from \"./templateManager\";\nimport appManager from \"./appManager\";\nimport menuManager from \"./menuManager\";\nimport paymentsManager from \"./paymentsManager\";\nimport utilsManager from \"./utilsManager\";\nimport dataManager from \"../../js/dataManager\";\nimport pageManager from '../../js/pageManager';\nimport validator from \"./validator\";\nimport userValidator from \"./userValidator\";\n/**/\nimport mapsManager from \"./mapsManager\";\n/**/\n\nexport default function creator() {\n\tvar _this = this;\n\t_this.sessionStatus = \"START SESSION\";\n\t//Esta variable determina el estatus de la sesión y tiene tres valores:\n\t//START SESSION quiere decir que el objeto web2b_template no ha sido creado, por lo tanto es una sesión completamente nueva\n\t//RESUME SESSION quiere decir que el objeto web2b_template sí existe, por lo tanto se está retomando una sesión anterior\n\t//UPDATE SESSION se asigna al final de la función updateContent solo la primera vez que esta corre, esto quiere decir que al inicio de la sesión, \n\t//una vez que el template se ha cargado y el contenido se ha actualizado por primera vez, el estatus siempre será UPDATE SESSION\n\t_this.current_step = 0;\n\t_this.lastKeyPressed = 0;\n\t_this.jd = {};\n\t_this.jd_templateId = null;\n\t/*Objects*/\n\t_this.new_colorManager = new colorManager();\n\t_this.new_colorManager.init(_this);\n\t_this.new_imageManager = new imageManager();\n\t_this.new_imageManager.init(_this);\n\t_this.new_itemManager = new itemManager();\n\t_this.new_itemManager.init(_this);\n\t_this.new_templateManager = new templateManager();\n\t_this.new_templateManager.init(_this);\n\t_this.new_appManager = new appManager();\n\t_this.new_appManager.init(_this);\n\t_this.new_menuManager = new menuManager();\n\t_this.new_menuManager.init(_this);\n\t_this.new_paymentsManager = new paymentsManager();\n\t_this.new_paymentsManager.init(_this);\n\t_this.new_utilsManager = new utilsManager();\n\t_this.new_utilsManager.init(_this);\n\t_this.new_userValidator = new userValidator();\n\t_this.new_userValidator.init(_this);\n\t/**/\n\t_this.new_mapManager = new mapsManager();\n\t_this.new_mapManager.init(_this);\n\t/* */\n\tvar new_tooltipManager = new tooltipManager();\n\t/*External objects*/\n\t_this.new_dataManager = new dataManager();\n\t_this.new_PageManager = new pageManager();\n\t_this.new_validator = new validator();\n\n\t/*FUNCTIONS*/\n\tvar validation = function () {\n\t\t/*1*/\n\t\t/*This function does two things*/\n\t\t/* 1) Sets a value for _this.jd as either localstorage->web2bTemplate or Web2b*/\n\t\tlet web2b = _this.new_dataManager.getObjFromLocalStorage(\"web2b\");\n\t\tlet web2bTemplate = _this.new_dataManager.getObjFromLocalStorage(\"web2b_template\");\n\t\tif (web2bTemplate.respuestas && Object.keys(web2bTemplate.respuestas).length > 2) {\n\t\t\t_this.sessionStatus = \"RESUME SESSION\";\n\t\t}\n\t\t_this.jd = Object.keys(web2bTemplate).length ? web2bTemplate : web2b;\n\t\t_this.jd_templateId = _this.new_dataManager.getObjFromLocalStorage(\"web2b_templateId\");\n\t\t/* 2) it checks if _this.jd has 'respuestas' and if it has 3 of them, if it doesn´t have them it sends the User to Root /, otherwise to start the Tour*/\n\t\tif (!_this.jd.respuestas) {\n\t\t\tlocation.href = \"/\";\n\t\t} else if (Object.keys(_this.jd.respuestas).length < 3) {\n\t\t\tlocation.href = \"/tour\";\n\t\t}\n\t};\n\tvar init = function () {/*2*/\n\t\t_this.new_userValidator.setUserValidation();\n\t\t_this.new_appManager.setApp();//3\n\t\t_this.new_templateManager.loadTemplate(_this.new_appManager.afterTemplateLoad);//6\n\t\tnew_tooltipManager.setTooltips();//7\n\t\t_this.new_paymentsManager.createPaypalButtons();\n\t};\n\treturn {\n\t\tvalidation: validation,\n\t\tinit: init\n\t};\n}","export default function colorManager () {\n\tvar _ctrl = null;\n\tvar _color_hex = \"#666666\";\n\tvar _palettes = {\n\t\tlight : 'Luminoso',\n\t\tdark : 'Oscuro',\n\t\tgrey : 'Monocromático',\n\t\timpact : 'Impactante',\n\t\tcolorful : 'Colorido'\n\t};\n\tvar _palette = \"impact\";\n\tvar init = function(_that) {\n\t\t_ctrl = _that;\n\t\tsetPalettes();\n\t}\n\tvar setPalettes = function() {\n\t\tfor (let k in _palettes) {\n\t\t\tvar $control_color = $(\".template.control-color\").clone().removeClass(\"template\");\n\t\t\t$control_color.find(\"h4\").html(_palettes[k]);\n\t\t\t$control_color.find(\"input\").attr(\"id\", (\"inp-palette-\" + k));\n\t\t\t$control_color.find(\"input\").attr(\"value\", k);\n\t\t\t$control_color.find(\".control-color-thumb\").attr(\"id\", (\"thumb-\" + k));\n\t\t\t$(\"#app-control-palettes\").append($control_color);\n\t\t}\n\t}\n\tvar updateColor = function(selections, $template) {\n\t\tif ((_ctrl.sessionStatus == 'START SESSION') || (_ctrl.sessionStatus == 'RESUME SESSION')) {\n\t\t\tif (selections[\"color\"]) {\n\t\t\t\t_color_hex = selections[\"color\"].text;\n\t\t\t} else {\n\t\t\t\tselections[\"color\"] = { \"name\": \"color\", \"type\": \"text\", \"text\":_color_hex };\n\t\t\t}\n\t\t\t$(\"#inp-color\").attr(\"value\", _color_hex);\n\t\t\tif (selections[\"palette\"]) {\n\t\t\t\t_palette = selections[\"palette\"].text;\t\n\t\t\t} else {\n\t\t\t\tselections[\"palette\"] = { \"name\": \"palette\", \"type\": \"text\", \"text\":_palette };\n\t\t\t}\n\t\t\t$(\"#thumb-\" + _palette).addClass(\"thumb-selected\");\n\t\t\t$(\"#inp-palette-\" + _palette).attr(\"checked\", \"checked\");\n\t\t} \n\t\tif (_ctrl.sessionStatus == 'UPDATE SESSION') {\n\t\t\t_palette = $(\"[name='inp-palette']:checked\").val();\n\t\t\tselections[\"palette\"].text = _palette;\n\t\t\t_color_hex = ($(\"#inp-color\").val());\n\t\t\tselections[\"color\"].text = _color_hex;\n\t\t}\n\t\tlet id = $(\"[name^='inp-design']:checked\").val().replace(\"inp-design-\", \"\") * 1;\n\t\tlet url = \"Templates/php/color/style.php?t=\" + id + \"&hex=\" + _color_hex.replace(\"#\", \"\");\n\t\t$(\"#style-color\").html(\"\").load(url);\n\t\t/* */\n\t\t$template.attr(\"class\", (\"color-\" + _palette));\n\t}\n\treturn {\n\t\tinit : init,\n\t\tupdateColor : updateColor\n\t};\n}","export default function imageManager () {\n\tvar _ctrl = null;\n\tvar _uploaded_images = {};\n\tvar _loaded_images = [];\n\tvar _current_images = [];\n\tvar _uploaded_images_url = \"/crea/client_images/\";\n\tvar _err_unsplash = \"An error occurred while loading images from UnSplash.\";\n\tvar init = function (_that) { _ctrl = _that; };\n\tvar setImageSelection = (ide) => {\n\t\tgetImagesUploadedByUser();\n\t\tloadImagesFromUnsplash(ide).then(function(data) { onImagesLoaded(data); }, function(err) { console.log(err); });\n\t};\n\n\tvar getImagesUploadedByUser = () => {\n\t\tlet s = \"-uploaded\";\n\t\tlet keys = Object.keys(_ctrl.jd.selections);\n\t\tfor(let i = 0; i < keys.length; i++) {\n\t\t\tif(keys[i].indexOf(s) > -1) {\n\t\t\t\tlet ns = keys[i].replace(s, \"\");\n\t\t\t\tlet obj = _ctrl.jd.selections[keys[i]];\n\t\t\t\tif (obj.text && obj.text != \"\") {\n\t\t\t\t\t_uploaded_images[ns] = [];\n\t\t\t\t\tlet arr = obj.text.split(\",\");\n\t\t\t\t\tfor (let k = 0; k < arr.length; k++) { _uploaded_images[ns].push(arr[k]); }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\tvar loadImagesFromUnsplash = (ide) => {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\t$.post( \"scripts/unsplashMW.php\", { \n\t\t\t\tapi_path: \"https://api.unsplash.com/search/photos\", \n\t\t\t\tparams: \"query=\" + encodeURIComponent(ide) + \"&page=1&per_page=20&orientation=landscape\"\n\t\t\t})\n\t\t\t.done(function(data){\n\t\t\t\tresolve(data.results);\n\t\t\t}).fail(function(){ reject(Error(_err_unsplash)); });\n\t\t});\t\n\t};\n\tvar onImagesLoaded = (data) => {\n\t\tif (_loaded_images.length == 0) {\n\t\t\tfor(let x=0; x<data.length ; x++){\n\t\t\t\t_loaded_images.push(\n\t\t\t\t\tdata[x].urls.regular + '#web2b#' +\n\t\t\t\t\tdata[x].links.download_location + '#web2b#' +\n\t\t\t\t\tdata[x].user.links.html + '#web2b#' +\n\t\t\t\t\tdata[x].user.name\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tsortImages();\n\t};\n\tvar sortImages = () => {\n\t\tlet image_types = [\"hero\",\"aboutus\",\"cta\",\"gallery\",\"logo\"];\n\t\tlet items = $(\"#template .item\").length;\n\t\tfor(let i = 1; i <= items; i++ ){ image_types.push('item-' + i); }\n\t\tfor (let i = 0; i < image_types.length; i++) {\n\t\t\tlet t = image_types[i];\n\t\t\t_current_images[t] = [];\n\t\t\tif (_ctrl.jd.selections[(\"#img-\" + t)] && _ctrl.jd.selections[(\"#img-\" + t)].img) {\n\t\t\t\tlet jd_images = _ctrl.jd.selections[(\"#img-\" + t)].img.split(\",\");\n\t\t\t\tfor (let j = 0; j < jd_images.length; j++){\n\t\t\t\t\tif (jd_images[j] != \"\") {\n\t\t\t\t\t\t_current_images[t].push([jd_images[j], \"selected\"]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// arr of base images from unsplash\n\t\t\tlet arr = [];\n\t\t\t// exclde from here if needed\n\t\t\tif(t != 'logo') {\n\t\t\t\tarr = _uploaded_images[\"#img-\" + t] ? _uploaded_images[\"#img-\" + t].concat(_loaded_images) : _loaded_images;\n\t\t\t}\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tlet add_image = true;\n\t\t\t\tfor (let k = 0; k < _current_images[t].length; k++) {\n\t\t\t\t\tif (_current_images[t][k][0] == arr[i]) {\n\t\t\t\t\t\tadd_image = false; break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (add_image) { _current_images[t].push([arr[i], \"\"]); }\n\t\t\t}\n\n\t\t\t// Clean container before addin the images\n\t\t\t$(\"#app-control-images-\" + t + \" .photo-container\").empty();\n\t\t\t\n\t\t\tfor(let j=0; j < _current_images[t].length; j++){\n\t\t\t\tsetUploadedImage(_current_images[t][j][0], t, _current_images[t][j][1] == \"selected\", true, j);\n\t\t\t}\n\t\t}\n\t};\n\tvar setImagesOnStartSession = () => {\n\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,\"#img-gallery\",\"\",'image');\n\t\t$(\"#gallery .gallery .img\").each(function(index) {\n\t\t\tlet img_src = $(this).attr(\"data-src\");\n\t\t\tlet p = _ctrl.jd.selections[\"#img-gallery\"].img == \"\" ? \"\" : (_ctrl.jd.selections[\"#img-gallery\"].img + \",\");\n\t\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,\"#img-gallery\",(p + img_src),'image');\n\t\t});\n\n\t};\n\tvar setImagesOnResumeSession = () => {\n\t\tfor(var key in _ctrl.jd.selections){\n\t\t\tswitch(_ctrl.jd.selections[key].type){\n\t\t\t\tcase \"image\":\t\t\t\t\t\n\t\t\t\t\tif (key == \"#img-logo\") {\n\t\t\t\t\t\tif(_ctrl.jd.selections[key].active !== undefined && _ctrl.jd.selections[key].active === false) {\n\t\t\t\t\t\t\t_ctrl.new_appManager.hideTemplateElements(true, key);\n\t\t\t\t\t\t\t_ctrl.new_appManager.hideFormElements(\"[name='logo']\",'#img-logo',\"image\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(key).attr('src',_ctrl.jd.selections[key].img);\n\t\t\t\t\t} else if(key == \"#img-gallery\") {\n\t\t\t\t\t\t$(\"#gallery .gallery .img\").remove().detach();\n\t\t\t\t\t\tlet imgs_str = _ctrl.jd.selections[\"#img-gallery\"].img;\n\t\t\t\t\t\tlet imgs_arr = imgs_str.split(\",\");\n\t\t\t\t\t\tfor (let i = 0; i < imgs_arr.length; i++){\n\t\t\t\t\t\t\tlet img = imgs_arr[i];\n\t\t\t\t\t\t\tif(img && img.search('#web2b#') !== -1) {\n\t\t\t\t\t\t\t\tconst arr = img.split('#web2b#');\n\t\t\t\t\t\t\t\timg = arr[0];\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\tlet $img = $(\".img.template\").clone().removeClass(\"template\").css(setBackgroundImage(img));\n\t\t\t\t\t\t\tif (img != \"\") {\n\t\t\t\t\t\t\t\t$(\"#gallery .gallery\").append($img);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(\"#gallery .gallery .img:gt(0)\").hide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet img = _ctrl.jd.selections[key].img;\n\t\t\t\t\t\tif(img && img.search('#web2b#') !== -1) {\n\t\t\t\t\t\t\tconst arr = img.split('#web2b#');\n\t\t\t\t\t\t\timg = arr[0];\n\t\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t\t\t$(key).attr(\"class\", (\"img img-MC img-L\")).css(setBackgroundImage(img));\t\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\tvar setImagesOnUpdateSession = (target) => {\n\t\tlet $this = $(target);\n\t\tif ($this.is(\"[value]\")) {\n\t\t\tlet img = $this.val();\n\t\t\tlet org_img = img;\n\t\t\tlet n_name = $this.attr(\"name\").replace(\"inp-\", \"#\");\n\n\t\t\tlet downloadUrl = $this.attr('data-download');\n\t\t\tlet autorUrl = $this.attr('data-autor');\n\t\t\tlet autor = $this.attr('data-autor-name');\n\n\t\t\timg = downloadUrl !== undefined ?\n\t\t\t\t(img + '#web2b#' +\n\t\t\t\tdownloadUrl + '#web2b#' +\n\t\t\t\tautorUrl + '#web2b#' +\n\t\t\t\tautor) :\n\t\t\t\timg;\n\n\n\t\t\tif ($this.prop('checked')) {\n\t\t\t\t/* call unsplash download link if exists and info*/\n\t\t\t\tif(downloadUrl !== undefined) {\n\t\t\t\t\t$.post( \"scripts/unsplashMW.php\", {\n\t\t\t\t\t\tapi_path: downloadUrl\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/*SAVES IMAGE TO OBJECT*/\n\t\t\t\tsaveImageInStorage(img, n_name, (n_name == \"#img-gallery\"));\n\t\t\t\t\n\t\t\t\t/*DISPLAYS IMAGE*/\n\t\t\t\tdisplayImageOnTemplate(org_img, n_name.replace(\"#img-\", \"\"));\n\t\t\t} else {\n\t\t\t\tif($this.closest(\"#app-control-images-gallery\").length > 0) {\n\t\t\t\t\t/*REMOVES FROM SELECTION*/\n\t\t\t\t\tlet gallery_arr = _ctrl.jd.selections[n_name].img.split(',');\n\t\t\t\t\tif (gallery_arr.indexOf(img) != -1) {\n\t\t\t\t\t\tgallery_arr.splice(gallery_arr.indexOf(img),1);\n\t\t\t\t\t\tvar new_arr = gallery_arr.join(',');\n\t\t\t\t\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,n_name,new_arr,'image');\n\t\t\t\t\t}\n\t\t\t\t\t/*REMOVES FROM DISPLAY AND RESTARTS PLAYER*/\n\t\t\t\t\t//$(\"#gallery .gallery .img\").filter(\"[style*='\" + org_img + \"']\").remove().end().hide().filter(\":eq(0)\").show();\n\t\t\t\t\t$(\"#gallery .gallery .img\").filter(\"[style*='\" + org_img + \"']\").remove();\n\t\t\t\t\t$(\"#gallery .gallery .img\").hide();\n\t\t\t\t\t$(\"#gallery .gallery .img\").first().show();\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\t\t\n\t};\n\tvar setUploadedImage = (img, cont, selected, append, index) => {\n\t\tlet arr = '';\n\t\tif(img && img.search('#web2b#') !== -1) {\n\t\t\tarr = img.split('#web2b#');\n\t\t\timg = arr[0];\n\t\t}\n\t\tlet $img_thumb = $(\".img-thumb.template\").clone();\n\t\t$img_thumb.removeClass(\"template\").find(\".img-thumb-cont\").css(setBackgroundImage(img)).attr(\"data-img-url\", img);\n\t\t$img_thumb.find(\"input\").attr(\"value\", img);\n\t\tif(arr != ''){\n\t\t\t$img_thumb.find(\"input\").attr('data-download', arr[1]);\n\t\t\t$img_thumb.find(\"input\").attr('data-autor', arr[2]);\n\t\t\t$img_thumb.find(\"input\").attr('data-autor-name', arr[3]);\n\t\t\tlet autor_name = arr[3];\n\t\t\t$img_thumb.find(\".img-thumb-autor a\").attr('href',\n\t\t\t\tarr[2] + \"?utm_source=web2b&utm_medium=referral\");\n\t\t\t\t$img_thumb.find(\".img-thumb-autor a\").text(autor_name);\n\t\t\t$img_thumb.find(\".img-thumb-autor\").show();\n\t\t}\n\t\tvar $this_img_thumb = $img_thumb.clone();\n\t\t$this_img_thumb.find(\"input\").attr(\"name\", (\"inp-img-\" + cont));\n\t\tif (selected) { $this_img_thumb.addClass(\"thumb-selected\").find(\"input\").attr(\"checked\", \"checked\"); }\n\t\tif(append) {\t\n\t\t\t$(\"#app-control-images-\" + cont + \" .photo-container\").append($this_img_thumb);\n\t\t} else {\t\n\t\t\t$(\"#app-control-images-\" + cont + \" .photo-container\").prepend($this_img_thumb);\n\t\t}\t\n\t\tif (cont == \"gallery\") {\n\t\t\t$this_img_thumb.find(\"input\").attr(\"type\", \"checkbox\");\n\t\t\t$this_img_thumb.find(\".img-thumb-overlay>span\").html(index + 1);\n\t\t}\n\t};\n\tvar uploadImage = (e) => {\n\t\te.preventDefault();\t\t\n\n\t\tlet parent = $(e.currentTarget).parent();\n\t\tlet f = $(\"input[type=file]\",parent);\n\t\tlet\tformData = new FormData();\n\t\tlet ide = f.data(\"ide\");\n\t\tlet name = f.attr(\"name\");\n\n\t\t// remove previous errors\n\t\t$('.error', parent).remove();\n\n\t\t$(\"input[type=submit],button\",parent).attr(\"disabled\",true);\n\t\tformData.append(f.attr(\"name\"), f[0].files[0]);\t\n\n\t\t$.ajax({ url: (\"scripts/uploadImage.php?unique_id=\" + _ctrl.jd_templateId), type: \"post\", data: formData, cache: false, contentType: false, processData: false })\n\t\t.done(function(res){\n\t\t\tif(res.upload == 1){\t\t\t\n\t\t\t\tlet img_src = _uploaded_images_url + res.texto;\n\t\t\t\tlet n_name = \"#img-\" + name;\n\t\t\t\tlet pre = _ctrl.jd.selections[(n_name + \"-uploaded\")] ? ((_ctrl.jd.selections[(n_name + \"-uploaded\")].text.indexOf(img_src) == -1) ? (_ctrl.jd.selections[(n_name + \"-uploaded\")].text + \",\") : \"\") : \"\";\n\t\t\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,(n_name + \"-uploaded\"),(pre + img_src),'text');\n\t\t\t\tsaveImageInStorage(img_src, (\"#img-\" + name), (name == \"gallery\"));\n\t\t\t\t/*SAVES IMAGE TO OBJECT*/\n\t\t\t\t_ctrl.new_dataManager.saveWeb2bJson(_ctrl.jd);\n\t\t\t\t/*ADDS THUMB*/\n\t\t\t\t//if (_ctrl.jd.selections[(n_name + \"-uploaded\")] && (_ctrl.jd.selections[(n_name + \"-uploaded\")].text.indexOf(img_src) == -1)) {\n\t\t\t\t\tsetUploadedImage(img_src, name, false, false, 0);\n\t\t\t\t//}\n\t\t\t\t/*DISPLAYS IMAGE*/\n\t\t\t\tdisplayImageOnTemplate(img_src, name);\n      \t\t} else {\n\t\t\t\tparent.append(\"<span class='error'>Error al subir tu foto: \" + res.texto + \"</span>\");\n\t\t\t}\n\t\t})\n\t\t.fail((e)=>{\n\t\t\tconsole.log(e);\n\t\t})\n\t\t.always(function(){ $(\"button\",parent).attr(\"disabled\",false); });\n\t};\n\tvar saveImageInStorage = (img, cont, isGallery) => {\n\t\tlet pre = isGallery ? (_ctrl.jd.selections[cont].img + \",\") : \"\";\n\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,cont,(pre + img),'image');\n\t};\n\tvar displayImageOnTemplate = (img, cont) => {\n\t\tif (cont == \"logo\") {\n\t\t\t$(\"#img-logo\").attr('src',img);\n\t\t} else if (cont == \"gallery\") {\n\t\t\tlet $img = $(\".img.template\").clone().removeClass(\"template\").css(setBackgroundImage(img));\n\t\t\t$(\"#gallery .gallery\").append($img).find(\".img\").hide().filter(\":eq(0)\").show();\n\t\t} else {\n\t\t\t$(\"#img-\" + cont).css(setBackgroundImage(img));\n\t\t} \n\t};\n\tvar setBackgroundImage = (img, obj = {}) => { obj[\"background-image\"] = 'url(' + img + ')'; return obj; };\n\treturn {\n\t\tinit : init,\n\t\tsetImageSelection : setImageSelection,\n\t\tsetImagesOnStartSession : setImagesOnStartSession,\n\t\tsetImagesOnResumeSession : setImagesOnResumeSession,\n\t\tsetImagesOnUpdateSession : setImagesOnUpdateSession,\n\t\tuploadImage : uploadImage\n    };\n}","export default function toolTipManager () {    \n    var setTooltips = function() {\n\t\t$(\".app-control-step-tooltip-info\").before($(\".app-control-step-tooltip.template\").clone().removeClass(\"template\"));\n\t\t$(\".app-control-step-tooltip\").click(function() {\n\t\t\tvar $target = $(this).next(\".app-control-step-tooltip-info\");\n\t\t\tif ($target.is(\":visible\")) {\n\t\t\t\t$target.removeClass(\"active\");\n\t\t\t} else {\n\t\t\t\t$target.addClass(\"active\");\n\t\t\t}\n\t\t});\n\t}\n    return {\n        setTooltips : setTooltips\n    };\n}","export default function itemManager () {\n\tvar _ctrl = null;\n\tvar _number_of_items = 0;\n\tvar _type_of_item = 0;\n\tvar _current_step = 0;\n\tvar init = function(_that) {\n\t\t_ctrl = _that;\n\t};\n    var setItems = function() {\n\t\t/*FIRES AFTER TEMPLATE IS LOADED*/\n\t\tswitch (_ctrl.sessionStatus) {\n\t\t\tcase \"START SESSION\" :\n\t\t\t\t_number_of_items = $(\"#template .item\").length;\n\t\t\t\t_ctrl.jd.selections[\"inp-content-items-number\"] = { \"name\": \"items-number\", \"type\": \"text\", \"text\":_number_of_items };\n\t\t\t\t_ctrl.new_dataManager.saveWeb2bJson(_ctrl.jd);\n\t\t\t\tbreak;\n\t\t\tcase \"RESUME SESSION\" :\n\t\t\tcase \"UPDATE SESSION\" :\n\t\t\t\t_number_of_items = _ctrl.jd.selections[\"inp-content-items-number\"].text;\n\t\t\t\tfor (let i = 0; i < _number_of_items; i++) { addItemToTemplate(i); }\n\t\t\t\tbreak;\n\t\t}\n\t\t$(\"#inp-content-items-number\").val(_number_of_items);\n\t\tfor (let i = 0; i < _number_of_items; i++) { addItemControl(i); }\n\t\t\n\t};\n\tvar addItemControl = function(i) {\n\t\t/*ADDS CONTROL*/\n\t\tlet k = (i * 1) + 1;\n\t\tif (i > 0) {//Item 0 is already included in form\n\t\t\tlet $i_t = $(\".item-control:eq(0)\").clone();\n\t\t\t$(\".add-item-control\").before($i_t);\n\t\t\t/*UPDATES CONTROL META DATA*/\n\t\t\t$i_t.find(\".content-item-number\").html(k);\n\t\t\t$i_t.find(\"input[type=text]\").attr({\n\t\t\t\t\"id\" : (\"inp-content-title-item-\" + k),\n\t\t\t\t\"name\" : (\"inp-content-title-item-\" + k)\n\t\t\t}).val(\"\");\n\t\t\t$i_t.find(\"textarea\").attr({\n\t\t\t\t\"id\" : (\"inp-content-item-\" + k),\n\t\t\t\t\"name\" : (\"inp-content-item-\" + k)\n\t\t\t}).val(\"\");\n\t\t\t$i_t.find(\"#app-control-images-item-\" + i).attr(\"id\", (\"app-control-images-item-\" + k));\n\t\t\t$i_t.find(\"input\").each(function() {\n\t\t\t\tif($(this).attr(\"type\") != \"file\" && $(this).attr(\"type\") != \"submit\"){ $(this).attr(\"name\", (\"inp-img-item-\" + k)); }\n\t\t\t\tif($(this).attr(\"type\") == \"file\"){ $(this).attr(\"name\", (\"item-\" + k)); }\n\t\t\t});\n\t\t}\n\t\t/*UPDATES CONTROL DATA*/\n\t\tlet i_img = _ctrl.jd.selections[\"#img-item-\" + k] ? _ctrl.jd.selections[\"#img-item-\" + k].img : \"\";\n\t\tlet i_t = _ctrl.sessionStatus == \"START SESSION\" ? $(\"#val-content-title-item-\" + k).html() : _ctrl.jd.selections[\"inp-content-title-item-\" + k].text;\n\t\tlet i_c = _ctrl.sessionStatus == \"START SESSION\" ? $(\"#val-content-item-\" + k).html() : _ctrl.jd.selections[\"inp-content-item-\" + k].text;\n\t\t//img\n\t\t$(\"#inp-content-title-item-\" + k).val(i_t);\n\t\t$(\"#inp-content-item-\" + k).val(i_c);\n\t\t/****************************************** */\n\t};\n    var addItem = function() {\n\t\t/*SAVES NEWLY ADDED ITEM TO COUNT*/\n\t\taddItemControl(_number_of_items);\n\t\taddItemToTemplate(_number_of_items);\n\t\t_number_of_items = (_number_of_items * 1) + 1;\n\t\t$(\"#inp-content-items-number\").val(_number_of_items);\n\t\t/*RESETS ADD ITEM CONTROL*/\n\t\t$(\"#inp-content-item-add-y\").prop('checked', false);\n\t\t$(\"#inp-content-item-add-n\").trigger(\"click\");\n\t};\n    var addItemToTemplate = function (i) {\n\t\tlet items_in_template = $(\"#template .item\").length;\n\t\tif (i >= items_in_template) {\n\t\t\tif ($(\"#template .items:last .item\").length == 3) { $(\"#template .items:last\").after(\"<div class='items'></div>\"); }\n\t\t\tvar $item_copy = $(\"#template .item:last\").clone();\n\t\t\t$item_copy.find(\"#img-item-\" + i).attr(\"id\", (\"img-item-\" + (i + 1)));\n\t\t\t$item_copy.find(\"#val-content-title-item-\" + i).attr(\"id\", (\"val-content-title-item-\" + (i + 1)));\n\t\t\t$item_copy.find(\"#val-content-item-\" + i).attr(\"id\", (\"val-content-item-\" + (i + 1)));\n\t\t\t$(\"#template .items:last\").append($item_copy);\n\t\t\tvar c = \"\";\n\t\t\tswitch ($(\"#template .items:last .item\").length % 3) {\n\t\t\t\tcase 0 : c = \"three\"; break;\n\t\t\t\tcase 1 : c = \"one\"; break;\n\t\t\t\tcase 2 : c = \"two\"; break;\n\t\t\t}\n\t\t\t$(\"#template .items:last\").attr(\"class\", \"items\").addClass(c);\n\t\t}\n\t};\n\tvar setContentType = function() { \n\t\tif (!_ctrl.jd.selections[\"inp-content-item-type\"]) {\n\t\t\t_type_of_item = $(\"input[name='inp-content-item-type']:checked\"). val();\n\t\t\t_ctrl.jd.selections[\"inp-content-item-type\"] = { \"name\": \"items-type\", \"type\": \"text\", \"text\":_type_of_item };\n\t\t} else {\n\t\t\tswitch (_ctrl.sessionStatus) {\n\t\t\t\tcase \"RESUME SESSION\" :\n\t\t\t\t\t_type_of_item = _ctrl.jd.selections[\"inp-content-item-type\"].text;\n\t\t\t\t\t$(\"input[name='inp-content-item-type'][value='\" + _type_of_item + \"']\").prop(\"checked\", \"checked\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"UPDATE SESSION\" :\n\t\t\t\t\t_type_of_item = $(\"input[name='inp-content-item-type']:checked\").val();\n\t\t\t\t\t_ctrl.jd.selections[\"inp-content-item-type\"].text = _type_of_item;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t$(\"#content-item-type label\").removeClass(\"checked\");\n\t\t\t$(\"input[name='inp-content-item-type']:checked\").parent().addClass(\"checked\");\n\t\t}\n\t\t\n\t\tlet v = $(\"input[name='inp-content-item-type']:checked\").attr(\"id\");\n\t\tlet m = \"\";\n\t\tswitch (v) {\n\t\t\tcase 'inp-content-item-type-1' : m = \"producto\"; break;\n\t\t\tcase 'inp-content-item-type-2' : m = \"servicio\"; break;\n\t\t\tcase 'inp-content-item-type-3' : m = \"producto o servicio\"; break;\n\t\t}\n\t\t$(\".content-item-type\").html(m);\n\t };\n\tvar getCurrentStep = function() { return _current_step; };\n\treturn {\n\t\tinit : init,\n\t\tsetItems : setItems,\n\t\taddItem : addItem,\n\t\tsetContentType : setContentType,\n        getCurrentStep : getCurrentStep\n\t};\n}","export default function templateManager () { \n\tvar _ctrl = null;\n\tvar init = function(_that) {\n        _ctrl = _that;\n    };\n    var loadTemplate = function(templateChanged = false) {\n\t\tlet id = $(\"[name^='inp-design']:checked\").val();\n\t\tid = id.replace(\"inp-design-\", \"\");\n\t\tif (_ctrl.sessionStatus == \"START SESSION\") {\n\t\t\t$(\"input[value='inp-design-\" + id + \"']\").closest(\".control-design-thumb\").addClass(\"thumb-selected\");\n\t\t}\n\t\tif (_ctrl.sessionStatus == \"RESUME SESSION\") {\n\t\t\tid = _ctrl.jd.selections.templateTypeId.value;\n\t\t\t$(\"[name^='inp-design']\").removeAttr(\"checked\");\n\t\t\tlet $newInp = $(\"input[value='inp-design-\" + id + \"']\");\n\t\t\t$newInp.attr(\"checked\",\"checked\");\n\t\t\t$newInp.closest(\".control-design-thumb\").addClass(\"thumb-selected\");\n\t\t}\n\t\tif(templateChanged) { _ctrl.sessionStatus = \"RESUME SESSION\"; }\n\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,\"templateTypeId\",id,\"config\");\n\t\t$(\"#template\").html(\"\");\n\t\tvar content_id = _ctrl.jd.respuestas[22].resp_id == \"\" ? 2 : _ctrl.jd.respuestas[22].resp_id;\n\t\tvar src = \"Templates/Template-\" + id + \"/index.php?t=\" + content_id + \"&color=impact&hex=000000\"; \n\t\t$(\"#template-cont\").load(src + \" #template\", function() {\n\t\t\tvar $template = $(\"#template\");\n\t\t\t$template.find(\"link[href^='css/styles.css']\").attr(\"href\", (\"Templates/Template-\" + id + \"/css/styles.css\"));\n\t\t\t_ctrl.new_itemManager.setItems();\n\t\t\t_ctrl.new_imageManager.setImageSelection(_ctrl.jd.respuestas[22].localizacion_en);\n\t\t\tupdateContent();\n\t\t\tconsole.log(\"TEMPLATE LOADED\");\n\t\t\t$.ajax({\n\t\t\t\turl: (\"Templates/Template-\" + id + \"/js/scripts.js\"),\n\t\t\t\tdataType: \"script\"\n\t\t\t});\t\t\t\n\t\t\t_ctrl.new_mapManager.start('inp-contact-address', 'iMap');\n\t\t});\t\t\n\t};\n\tvar updateContent = function (target = null) {\n\t\tlet $template = $(\"#template\");\n\t\tlet selections = _ctrl.jd.selections || {};\n\t\tif (target == null || target.href) {\n\t\t\t_ctrl.new_itemManager.setContentType();\n\t\t\tupdateTexts($template, selections);\n\t\t\t_ctrl.new_colorManager.updateColor(selections, $template)\n\t\t\tupdateImages(target);\n\t\t\tupdateRemoveControls($template, selections);\n\t\t} else if (target.name == 'inp-content-item-type') {\n\t\t\t_ctrl.new_itemManager.setContentType();\n\t\t} else if ((target.type) && ((target.type == 'text') || (target.type == 'textarea'))) {\n\t\t\tupdateTexts($template, selections);\n\t\t} else if (target.name == 'inp-color' || target.name == 'inp-palette') {\n\t\t\t_ctrl.new_colorManager.updateColor(selections, $template)\n\t\t} else if (target.name.indexOf(\"inp-rem-content\") > -1) {\n\t\t\tupdateRemoveControls($template, selections);\n\t\t} else {\n\t\t\tupdateImages(target);\n\t\t}\n\t\t_ctrl.new_dataManager.saveWeb2bJson(_ctrl.jd);\n\t\tif (_ctrl.sessionStatus != \"UPDATE SESSION\") { _ctrl.sessionStatus = \"UPDATE SESSION\"; }\n\t};\n\tvar afterTemplateLoad = () => {\n\t\t_ctrl.new_mapManager.start('inp-contact-address', 'iMap');\n\t};\n\tvar updateTexts = function ($template, selections) {\n\t\tif (_ctrl.sessionStatus == \"START SESSION\") {\n\t\t\t$(\"[id^='inp-contact-'], [id^='inp-content-'], #siteName\").each(function() {\n\t\t\t\tlet $this = $(this);\n\t\t\t\tlet i_id = $this.attr(\"id\");\n\t\t\t\tlet v_id = i_id.replace(\"inp\", \"val\");\n\t\t\t\tselections[i_id] = {};\t\n\t\t\t\tif (i_id == \"inp-content-slogan\") {\n\t\t\t\t\tlet slogan_from_tour = \"\";\n\t\t\t\t\tfor (let key in _ctrl.jd.respuestas) {\n\t\t\t\t\t\tif(_ctrl.jd.respuestas[key].tipo == 3) {\n\t\t\t\t\t\t\tslogan_from_tour = _ctrl.jd.respuestas[key].respuesta;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,\"inp-content-slogan\",slogan_from_tour,'text');\n\t\t\t\t\t$this.val(selections[i_id] ? selections[i_id].text : '');\n\t\t\t\t\t$template.find(\"#\" + v_id).html(selections[i_id] ? selections[i_id].text : '');\n\t\t\t\t} \n\t\t\t\tif (i_id == \"inp-content-title-aboutus\" || i_id == \"inp-content-aboutus\") {\n\t\t\t\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,i_id,$template.find(\"#\" + v_id).html(),'text');\n\t\t\t\t\t$this.val(selections[i_id] ? selections[i_id].text : '');\n\t\t\t\t} \n\t\t\t});\t\n\t\t}\n\t\tif (_ctrl.sessionStatus == \"RESUME SESSION\") {\n\t\t\t$(\"[id^='inp-contact-'], [id^='inp-content-'], #siteName\").each(function() {\n\t\t\t\tlet $this = $(this);\n\t\t\t\tlet i_id = $this.attr(\"id\");\n\t\t\t\tlet v_id = i_id.replace(\"inp\", \"val\");\n\t\t\t\tlet text = selections[i_id] && selections[i_id].text ? selections[i_id].text : '';\n\t\t\t\tif(i_id == 'inp-contact-address' && text.search('##') != -1) {\n\t\t\t\t\tlet arr = text.split('##');\n\t\t\t\t\ttext = arr[0];\n\t\t\t\t\t$this.data('place', arr[1]);\n\t\t\t\t}\n\t\t\t\t$this.val(text);\n\t\t\t\tif(selections[i_id] && selections[i_id].active !== undefined && selections[i_id].active === false) {\n\t\t\t\t\thideTemplateElements(true, i_id.replace('inp-','val-'));\n\t\t\t\t\t_ctrl.new_menuManager.hideFormElements(\"[name='\" + i_id + \"']\");\n\t\t\t\t}\t\t\t\t\n\n\t\t\t\tupdateSpecificFields($this, i_id, v_id, text, $template, selections);\n\t\t\t\tif ($('#' + v_id + '[pattern]').length > 0) {\n\t\t\t\t\tconsole.log(v_id);\n\t\t\t\t\t_ctrl.new_utilsManager.validateFields('#' + v_id);\n\t\t\t\t}\t\t\t\t\n\t\t\t});\n\t\t\t$template.find(\".footer-column:not(:has(li:visible))\").hide();\n\t\t}\n\t\tif (_ctrl.sessionStatus == \"UPDATE SESSION\") {\n\t\t\t$(\"[id^='inp-contact-'], [id^='inp-content-'], #siteName\")\n\t\t\t.each(function() {\n\t\t\t\tlet $this = $(this); \n\t\t\t\tlet i_id = $this.attr(\"id\");\n\t\t\t\tlet v_id = i_id.replace(\"inp\", \"val\");\n\t\t\t\tlet text = '';\n\t\t\t\tlet val = $this.val();\n\t\t\t\tif(i_id == 'inp-contact-address') {\n\t\t\t\t\ttext = val;\n\t\t\t\t\tval = val + ($this.data('place') ? ('##' + $this.data('place')) : '');\n\t\t\t\t\tif(text.search('##') != -1) {\n\t\t\t\t\t\tlet arr = text.split('##');\n\t\t\t\t\t\ttext = arr[0];\n\t\t\t\t\t\t$this.data('place', arr[1]);\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\t}\t\t\t\t\n\t\t\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,i_id,val,'text');\n\t\t\t\t$template.find(\"#\" + v_id).show().closest(\".column\").show();\n\t\t\t\tif (i_id == \"inp-content-name\") {\n\t\t\t\t\tif($template.find(\"#val-content-aboutus>span\").length > 0) {\n\t\t\t\t\t\t$template.find(\"#val-content-aboutus>span\").html(selections[i_id].text);\n\t\t\t\t\t\tlet t = $template.find(\"#val-content-aboutus\").html();\n\t\t\t\t\t\tt = t.replace(\"</span>\",\"\");\n\t\t\t\t\t\tt = t.replace('<span class=\"name\">',\"\");\n\t\t\t\t\t\t$template.find(\"#val-content-aboutus\").html(t);\n\t\t\t\t\t\t$(\"#inp-content-aboutus\").val($template.find(\"#val-content-aboutus\").html());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdateSpecificFields($this, i_id, v_id, text, $template, selections);\n\t\t\t\tif ($this.hasClass(\"optional\")) {\n\t\t\t\t\tif ($(\".app-control-step:eq(\" + (_ctrl.current_step) + \")\").has($this).length > 0) {\n\t\t\t\t\t\tif (_ctrl.lastKeyPressed == 8) {\n\t\t\t\t\t\t\t$template.find(\"#\" + v_id).html(val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} \n\n\t\t\t});\n\t\t\t$template.find(\".footer-column:not(:has(li:visible))\").hide();\n\t\t}\n\t};\n\tvar hideTemplateElements = function (hide, selector) {\n\t\tif (selector === \"#img-logo\" || selector == undefined) {\n\t\t\tif (!hide)\n\t\t\t\t$('#branding').show();\n\t\t\telse\n\t\t\t\t$('#branding').hide();\n\t\t} else {\n\t\t\tselector = selector.replace('inp-', 'val-');\n\t\t\tif (!hide)\n\t\t\t\t$('#' + selector).show();\n\t\t\telse\n\t\t\t\t$('#' + selector).hide();\n\t\t}\n\t};\n\tvar updateSpecificFields = function($this, i_id, v_id, text, $template, selections) {\n\t\tlet dir;\n\t\tlet arr;\n\t\tswitch (i_id) {\n\t\t\tcase \"inp-contact-email\" :\n\t\t\t\t$template.find(\"#val-contact-email\").html(\"<a href='mailto:\" + selections[i_id] ? selections[i_id].text : '' + \"'>\" + selections[i_id] ? selections[i_id].text : '' + \"</a>\");\n\t\t\t\tbreak;\n\t\t\tcase \"inp-contact-map\" :\n\t\t\t\t$template.find(\"#val-contact-map\").html(selections[i_id] ? selections[i_id].text : '');\n\t\t\t\tbreak;\t\t\n\t\t\tcase \"inp-contact-address\" :\n\t\t\t\t$template.find(\"#val-contact-address\").html(selections[i_id] ? text : '');\n\t\t\tbreak;\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tcase \"inp-contact-facebook\" :\n\t\t\t\tarr = (selections[i_id] && selections[i_id].text && selections[i_id].text != '')  ? \n\t\t\t\t\t\tselections[i_id].text.toLowerCase().split('facebook.com/') : '';\n\t\t\t\tif(arr != '') {\n\t\t\t\t\tdir = arr.length > 1 ? arr[1] : arr[0];\n\t\t\t\t\t$template.find(\"#val-contact-facebook\").html('<span class=\"font-icon\">g</span> <a href=\"http://www.facebook.com/' + \n\t\t\t\t\t\tdir + '\" target=\"_blank\">' + dir + '</a>');\n\t\t\t\t} else {\n\t\t\t\t\t$template.find(\"#val-contact-facebook\").html('');\n\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\tbreak;\t\n\t\t\tcase \"inp-contact-twitter\" :\n\t\t\t\tarr = (selections[i_id] && selections[i_id].text && selections[i_id].text != '')  ? \n\t\t\t\t\t\tselections[i_id].text.toLowerCase().split('twitter.com/') : '';\n\t\t\t\tif(arr != '') {\n\t\t\t\t\tdir = arr.length > 1 ? arr[1] : arr[0];\n\t\t\t\t\t$template.find(\"#val-contact-twitter\").html('<span class=\"font-icon\">t</span> <a href=\"http://www.twitter.com/' + \n\t\t\t\t\t\tdir + '\" target=\"_blank\">' + dir + '</a>');\t\n\t\t\t\t} else {\n\t\t\t\t\t$template.find(\"#val-contact-twitter\").html('');\n\t\t\t\t}\n\t\t\t\tbreak;\t\n\t\t\tcase \"siteName\":\n\t\t\t\t$(\".siteName span\").text(selections[i_id] ? selections[i_id].text : '');\n\t\t\t\t$(\".siteName\").attr(\"href\",\"http://\" + (selections[i_id] ? selections[i_id].text : '') + \".web2b.mx\");\n\t\t\t\tbreak;\n\t\t\tdefault : \n\t\t\t\t$template.find(\"#\" + v_id).html(selections[i_id] && selections[i_id].text !== '' ? selections[i_id].text : $this.attr(\"placeholder\"));\n\t\t\t\tbreak;\n\t\t}\t\t\n\t};\n\n\tvar updateRemoveControls = function ($template, selections) {\n\t\tif (_ctrl.sessionStatus == \"START SESSION\") {\n\t\t\t$(\"[id^='inp-rem-']\").each(function() {\n\t\t\t\tlet $this = $(this);\n\t\t\t\tlet v = \"Y\";\n\t\t\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,$this.attr(\"id\"),v,'text');\n\t\t\t});\n\t\t}\n\t\tif (_ctrl.sessionStatus == \"RESUME SESSION\") {\n\t\t\t$(\"[id^='inp-rem-']\").each(function() {\n\t\t\t\tlet $this = $(this);\n\t\t\t\tlet v = selections[$this.attr(\"id\")] && selections[$this.attr(\"id\")].text ? selections[$this.attr(\"id\")].text : \"N\";\n\t\t\t\tlet sec = \"\";\n\t\t\t\tswitch ($this.attr(\"id\")) {\n\t\t\t\t\tcase \"inp-rem-content-cta\" :\n\t\t\t\t\t\tsec = \"#cta\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"inp-rem-content-aboutus\" :\n\t\t\t\t\t\tsec = \"#aboutus\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"inp-rem-content-gallery\" :\n\t\t\t\t\t\t\tsec = \"#gallery\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"inp-rem-content-logo\" :\n\t\t\t\t\t\tsec = \"#branding\";\n\t\t\t\t\t\tbreak;\t \n\t\t\t\t}\n\t\t\t\tif (v == \"N\") {\n\t\t\t\t\t$this.prop(\"checked\", false);\n\t\t\t\t\tlet i = $this.attr(\"id\").replace(\"inp-rem-content\", \"#toggle\");\n\t\t\t\t\tlet t = $this.attr(\"id\").replace(\"inp-rem-content\", \"#conditional\");\n\t\t\t\t\t$(i).find(\".fas.fa-toggle-on\").attr(\"class\", \"fas fa-toggle-off\");\n\t\t\t\t\t_ctrl.new_menuManager.hideFormElements($(t));\n\t\t\t\t\t$template.find(sec).hide();\n\t\t\t\t}\n\t\t\t});\t\n\t\t}\n\t\tif (_ctrl.sessionStatus == \"UPDATE SESSION\") {\n\t\t\t$(\"[id^='inp-rem-']\").each(function() {\n\t\t\t\tlet $this = $(this);\n\t\t\t\tlet v = \"Y\";\n\t\t\t\tlet sec = \"\";\n\t\t\t\tswitch ($this.attr(\"id\")) {\n\t\t\t\t\tcase \"inp-rem-content-cta\" :\n\t\t\t\t\t\tsec = \"#cta\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"inp-rem-content-aboutus\" :\n\t\t\t\t\t\tsec = \"#aboutus\";\n\t\t\t\t\t\tbreak;\t \n\t\t\t\t\tcase \"inp-rem-content-gallery\" :\n\t\t\t\t\t\tsec = \"#gallery\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"inp-rem-content-logo\" :\n\t\t\t\t\t\tsec = \"#branding\";\n\t\t\t\t\t\tbreak;\t \n\t\t\t\t}\n\t\t\t\tif ($this.is(\":checked\")) { v = \"Y\"; } else { v = \"N\"; }\n\t\t\t\tif (selections[$this.attr(\"id\")] && selections[$this.attr(\"id\")].text) {\n\t\t\t\t\tselections[$this.attr(\"id\")].text = v;\n\t\t\t\t}\n\t\t\t\t_ctrl.new_dataManager.saveSelected(_ctrl.jd,$this.attr(\"id\"),v,'text');\t\t\n\t\t\t\tif (v == \"N\") {\n\t\t\t\t\t$template.find(sec).hide();\n\t\t\t\t} else {\n\t\t\t\t\t$template.find(sec).show();\n\t\t\t\t}\n\t\t\t});\t\n\t\t}\n\t};\n\tvar updateImages = function (target) {\n\t\tif(_ctrl.sessionStatus == \"START SESSION\"){ _ctrl.new_imageManager.setImagesOnStartSession(); }\n\t\tif(_ctrl.sessionStatus == \"RESUME SESSION\"){ _ctrl.new_imageManager.setImagesOnResumeSession(); }\n\t\tif(_ctrl.sessionStatus == \"UPDATE SESSION\"){ _ctrl.new_imageManager.setImagesOnUpdateSession(target); }\n\t};\n\treturn {\n\t\tinit : init,\n\t\tloadTemplate : loadTemplate,\n\t\tupdateContent: updateContent, \n\t\thideTemplateElements: hideTemplateElements,\n\t\tupdateTexts: updateTexts\n    };\n}","import paypalBtn from './pp';\nexport default function appManager() {\n\tvar _ctrl = null;\n\tvar init = function (_that) { _ctrl = _that; };\n\tvar setApp = function () {\n\t\t/*SET MENU*/\n\t\t_ctrl.new_menuManager.setMenu();\n\t\t/*DESIGN SELECTION*/\n\t\tif( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {\n\t\t\tsetTimeout(function() {\n\t\t\t\t$(\".control-design-cont\").prepend($(\".control-design-thumb.thumb-selected\"));\n\t\t\t\t$(\".control-design-cont\").prepend($(\".control-design-thumb:last\"));\n\t\t\t}, 500);\n\t\t\t$(\".control-design-thumb\").on(\"tap\",function(e){\n\t\t\t\tlet $this = $(this);\n\t\t\t\tlet i = $(\".control-design-thumb\").index($this);\n\t\t\t\tif (i == 0) { $this.parent().prepend($(\".control-design-thumb:last\")); }\n\t\t\t\tif (i == 2) { $this.parent().append($(\".control-design-thumb:first\")); }\n\t\t\t});\n\t\t}\n\t\t$(\".control-design-thumb\").on('click', function () {\n\t\t\t$(this).parent().find(\".thumb-selected\").removeClass(\"thumb-selected\");\n\t\t\t$(this).addClass(\"thumb-selected\");\n\t\t\t$(\"[name^='inp-design']\").prop(\"checked\", false);\n\t\t\t$(this).find(\"[name^='inp-design']\").prop(\"checked\", true);\n\t\t\t_ctrl.new_templateManager.loadTemplate(true);\n\t\t});\n\t\t/*START SCREEN NEXT BUTTON*/\n\t\t$(\".app-cover-start .next\").click(function () {\n\t\t\t$(\"#app-cover\").hide();\n\t\t\t$(\".app-cover-start\").hide();\n\t\t\t$(\".app-cover-finish\").show();\n\t\t\t_ctrl.current_step = 0;\n\t\t});\n\t\t/*FINISH BUTTON*/\n\t\t$(\".finish\").on(\"click\", function () {\n\t\t\t_ctrl.new_paymentsManager.createPayment();\n\t\t});\n\t\t/* SWITCH PAGE CONTROL*/\n\t\t$(\".ventana-login\").dialog(\"option\", \"width\", 400);\n\t\t$(\".final-msgs\").dialog(\"option\", \"width\", 400);\n\t\t$(\".change-page\").click((e) => {\n\t\t\te.preventDefault();\n\t\t\tlet userId = _ctrl.new_dataManager.getObjFromLocalStorage(\"web2b_userId\");\n\t\t\t_ctrl.new_PageManager.fillModal(userId, () => {\n\t\t\t\tlocation.reload();\n\t\t\t});\n\t\t\t$(\".ventana-login\").dialog(\"open\");\n\t\t});\n\t\t/*LOGOUT BUTTON*/\n\t\t$('.logout').click((e) => {\n\t\t\te.preventDefault();\n\t\t\tlocalStorage.clear();\n\t\t\tlocation.href = \"/\";\n\t\t});\n\t\t$(\".cerrar-ventana\").click(function () {\n\t\t\t$(\".ventana-login\").dialog(\"close\");\n\t\t});\n\t\t$(\".cerrar-final-msgs\").click(function () {\n\t\t\t$(\".final-msgs\").dialog(\"close\");\n\t\t});\n\t\t/*BACK BUTTON ON PAYMENTS*/\n\t\t$(\"#back\").click(() => {\n\t\t\t_ctrl.current_step--;\n\t\t\t$(\"#app-cover\").hide();\n\t\t});\n\t\t/*PUBLISH BUTTON*/\n\t\t$(\"#publish\").click(() => {\n\t\t\t_ctrl.new_paymentsManager.publishPagina();\n\t\t});\t\n\t\t/*UPDATE PAGES*/\n\t\tvar actual_page = _ctrl.new_dataManager.getObjFromLocalStorage('web2b_actualPage');\n\t\tif(actual_page.fecha_fin != null) {\n\t\t\tlet diff = _ctrl.new_utilsManager.fecha_diff(actual_page.fecha_fin);\n\t\t\tif(diff != 0) {\n\t\t\t\t$('#publish').show();\n\t\t\t}\n\t\t}\n\t};\n\treturn {\n\t\tinit: init,\n\t\tsetApp: setApp\n\t};\n}","export default function templateManager () { \n\tvar _ctrl = null;\n\tvar init = function(_that) { _ctrl = _that; };\n    var setMenu = function () {\n\t\tsetMainControls();\n\t\tsetFormControls();\t\t\n\t\t/* manage dialog ??*/\n\t\t$(\"#ok_btn\").click(function () {\n\t\t\t$(\".alert.dialog\").dialog(\"close\");\n\t\t});\n\t\t\n\t};\n\tvar setMainControls = function () {\n\t\t/*APP SWITCH*/\n\t\t$(\"[id^='switch-']\").on('click', function () {\n\t\t\t$(\"#app-control\").toggleClass(\"view\");\n\t\t\t$(\"#app-control-nav\").toggleClass(\"view\");\n\t\t\t$(\"#app-switch\").toggleClass(\"view\");\n\t\t\t$(\"body\").toggleClass(\"init\");\n\t\t});\n\t\t/*EO APP SWITCH*/\n\t\t/*STEP NAVIGATION*/\n\t\t$(\".app-control-step:gt(0)\").hide();\n\t\tfor (let i = 0; i < $(\"#app-control>.app-control-step\").length - 1; i++) {\n\t\t\t$(\"#control-view-index\").append(($(\".control-view-index-step.current\").clone().removeClass(\"current\")));\n        }\n\t\t$(\".control-view-nav-display-mark:eq(\" + _ctrl.current_step + \")\").addClass(\"control-view-nav-display-mark-active\");\n\t\t$(\"#control-view-nav>a\").on(\"click\", function (e) {\n\t\t\tif ($(\".app-control-step .container-error\").length == 0) {\n\t\t\t\tlet inc = $(this).attr(\"href\") == \"#next\" ? 1 : -1;\n\t\t\t\tlet index = _ctrl.current_step + inc;\n\t\t\t\tlet totalSteps = $(\"#app-control>.app-control-step\").length;\n\t\t\t\tif (index >= totalSteps) { index = totalSteps; }\n\t\t\t\tif (index == 1) { $(\"#control-view-nav>a:eq(0)\").removeClass(\"disabled\"); }\n\t\t\t\t_ctrl.new_menuManager.goToStep(index, e.currentTarget);\n\t\t\t}\n\t\t});\n\t\t$(document).on(\"click\", \".control-view-index-step\", function (e) {\n\t\t\tlet $this = $(this);\n\t\t\tlet index = $(\".control-view-index-step\").index($this);\n\t\t\t_ctrl.new_menuManager.goToStep(index, e.currentTarget);\n\t\t});\n\t\t/*EO STEP NAVIGATION*/\n    };\n\tvar setFormControls = function () {\n\t\t/*TEXT*/\n\t\t$(document.body).on(\"keyup\", \"[name^='inp-'][type='text'][id!='inp-contact-address'],textarea[name^='inp-']\", function (e) {\n\t\t\t_ctrl.lastKeyPressed = e.keyCode || e.which;\n\t\t\t_ctrl.new_templateManager.updateContent(e.currentTarget);\n\t\t});\n\t\t$(\"[data-validate]\").on(\"focusout\", function(e){\n\t\t\t_ctrl.new_utilsManager.validateFields(e.currentTarget, true);\n\t\t});\n\t\t/*TEXT*/\n\t\t/*NOT TEXT*/\n\t\t/*UPDATE ONLY IF VALUE CHANGES*/\n\t\t$(document.body).on(\"change\", \"[name^='inp-'][type!='text']\", function (e) {\n\t\t\t_ctrl.new_templateManager.updateContent(e.currentTarget);\n\t\t});\n\t\t/*NOT TEXT*/\n\t\t/*TOGGLES*/\n\t\t$(\".toggle\").click(function (e) {\n\t\t\te.preventDefault();\n\t\t\tlet $this = $(this);\n\t\t\tlet t = $this.attr(\"id\").replace(\"toggle\", \"#conditional\");\n\t\t\tlet i = $this.attr(\"id\").replace(\"toggle\", \"#inp-rem-content\");\n\t\t\tif ($this.find(\".fas.fa-toggle-on\").length > 0) {\n\t\t\t\t$this.find(\".fas.fa-toggle-on\").attr(\"class\", \"fas fa-toggle-off\");\n\t\t\t} else {\n\t\t\t\t$this.find(\".fas.fa-toggle-off\").attr(\"class\", \"fas fa-toggle-on\");\n\t\t\t}\n\t\t\t$(i).trigger(\"click\");\n\t\t\t_ctrl.new_templateManager.updateContent(e.currentTarget);\n\t\t\thideFormElements($(t));\n\t\t});\n\t\t/*TOGGLES*/\n\t\t/*ACCORDION*/\n\t\t$(\"body\").on(\"click\", \".accordion h4\", function() {\n\t\t\t$(this).toggleClass(\"expanded\");\n\t\t\t$(this).next().toggle();\n\t\t}).find(\".accordion h4\").trigger(\"click\");\n\t\t/*ACCORDION*/\n\t\t/*IMAGES*/\n\t\t$(document.body).on('click', '.img-thumb-cont', function () {\n\t\t\tvar $this = $(this);\n\t\t\t$this.closest(\"[id^='app-control-images']\")\n\t\t\t\t.not('#app-control-images-gallery')\n\t\t\t\t.find(\".img-thumb\")\n\t\t\t\t.removeClass(\"thumb-selected\");\n\t\t\t$this.next(\"input\").trigger(\"click\");\n\n\t\t\t// if gallery\n\t\t\tconst $parent = $this.closest(\"[id^='app-control-images']\");\n\t\t\tif ($parent.attr('id').search('gallery') != -1) {\n\t\t\t\tconst actualNum = $parent.find(\".thumb-selected\").length;\n\t\t\t\t$this.parent().find(\".img-thumb-overlay span\").text(actualNum + 1);\n\t\t\t}\n\n\t\t\t$this.parent().addClass(\"thumb-selected\");\n\t\t});\n\t\t$(document.body).on('click', '.img-thumb-overlay', function () {\n\t\t\tvar $this = $(this); \n\n\t\t\t// if gallery\n\t\t\tconst $parent = $this.closest(\"[id^='app-control-images']\");\n\t\t\tif ($parent.attr('id').search('gallery') != -1) {\n\t\t\t\tconst actualNum = $this.parent().find(\".img-thumb-overlay span\").text();\n\t\t\t\t$parent.find(\".thumb-selected\").each((i,e) => {\n\t\t\t\t\tconst an = $('.img-thumb-overlay span', e).text();\n\t\t\t\t\tif (an > actualNum) {\n\t\t\t\t\t\t$('.img-thumb-overlay span', e).text(an - 1);\n\t\t\t\t\t}\n\t\t\t\t});\t\t\t\t\n\t\t\t}\n\n\t\t\t$this.closest(\".img-thumb\").removeClass(\"thumb-selected\").find(\"input\").trigger(\"click\");\n\t\t});\n\t\t$(document.body).on('click', '.img-thumb-cont-zoom', function () {\n\t\t\tlet img_url = $(this).parent().find(\".img-thumb-cont\").attr(\"data-img-url\");\n\t\t\t$(\"#single-modal>div\").html(\"<img src='\" + img_url + \"' class='img-thumb-zoomed' />\");\n\t\t\t$(\"#single-modal\").fadeIn();\n\t\t}).append($(\"#single-modal\"));\n\t\t$(\"body\").on('DOMSubtreeModified', \"#app-control-images-logo\", function () {\n\t\t\t$(\"#app-control-images-logo\").parent().attr('style', '');\n\t\t});\n\t\t/*IMAGES*/\n\t\t/*COLOR*/\n\t\t$(\"body\").on('click', \".control-color-thumb\", function() {\n\t\t\tlet $this = $(this);\n\t\t\t$this.closest(\"#app-control-palettes\").find(\".control-color-thumb\").removeClass(\"thumb-selected\");\n\t\t\t$this.parent().find(\"input\").trigger(\"click\");\n\t\t\t$this.addClass(\"thumb-selected\");\n\t\t});\n\t\t/*COLOR*/\n\t\t/*ITEMS*/\n\t\t$(\"body\").on(\"click\", \"#inp-content-item-add-y\", function() {\n\t\t\t_ctrl.new_itemManager.addItem();\n        });\n\t\t/*ITEMS*/\n\t\t/*UPLOADS*/\n\t\t$('.file-upload button').on(\"click\", (e) => {\n\t\t\tconsole.log($(e.currentTarget).next(\"input[type='file']\").length);\n\t\t\te.preventDefault();\n\t\t\t$(e.currentTarget).parent().find(\"input[type='file']\").click();\n\t\t});\n\t\t$('.file-upload input[type=file]').on('change', (e) => {\n\t\t\tconsole.log(\"hi\");\n\t\t\tlet file = $(e.currentTarget)[0].files[0].name;\n\t\t\t$(\"span\", $(e.currentTarget).parent()).text(file);\n\t\t\t$(\"input[type=submit]\", $(e.currentTarget).closest(\"form\")).attr(\"disabled\", false);\n\t\t});\n\t\t$('.file-upload input[type=\"submit\"]').on('click', _ctrl.new_imageManager.uploadImage);\n\t\t/*UPLOADS*/\n\t};\n\tvar hideFormElements = function($s) {\n\t\t$s.toggleClass(\"hidden\");\n\t};\n\tvar goToStep = function (step, target) {\n\t\tif ($(\".app-control-step .container-error\").length == 0) {\n\t\t\t_ctrl.current_step = step;\n\t\t\t_ctrl.new_templateManager.updateContent(target);\n\t\t\tif (step == -1) {\n\t\t\t\t$(\"#app-cover\").show();\n\t\t\t\t$(\".app-cover-start\").show();\n\t\t\t\t$(\".app-cover-finish\").hide();\n\t\t\t} else if (step < ($(\".app-control-step\").length)) {\n\t\t\t\t$(\".app-control-step\").hide().filter(\":eq(\" + step + \")\").show();\n\t\t\t\t$(\".control-view-index-step\").removeClass(\"current\").filter(\":eq(\" + step + \")\").addClass(\"current\");\n\t\t\t} else {\n\t\t\t\t$(\"#app-cover\").show();\n\t\t\t\t$(\".app-cover-start\").hide();\n\t\t\t\t$(\".app-cover-finish\").show();\n\t\t\t}\n\t\t} else { $(\".app-control-step .container-error\").hide().fadeIn(\"fast\"); }\n\t};\n    return {\n        init : init,\n        setMenu : setMenu,\n\t\thideFormElements: hideFormElements,\n\t\tgoToStep: goToStep\n    };\n}","import paypalBtn from './pp';\nexport default function paymentsManager () { \n    var _ctrl = null;\n    var init = function(_that) {\n        _ctrl = _that;\n        \n    };\n    var createPayment = function() {\n        let id_pagina = _ctrl.new_dataManager.getObjFromLocalStorage('web2b_templateId');\n        let id_usuario = _ctrl.new_dataManager.getObjFromLocalStorage('web2b_userId');\n        let template_info = _ctrl.new_dataManager.getObjFromLocalStorage('web2b_template');\n\n        if(template_info.selections.siteName.text.trim() == '' || template_info.selections.siteName.text.trim().lenght < 3) {\n            $('.final-msgs p').text('El nombre de tu sitio no ha sido proporcionado. Por favor, regresa a las pantallas anteriores para definirlo.');\t\t\t\t\n            $('.final-msgs').dialog(\"open\");\t\t\t\t\n            return;\n        }\n        \n        //Crear pago\n        $.post(\"scripts/crear_pago.php\", {\n            id_usuario: id_usuario,\n            paquete: 'gratuito',\n            info_pago: 'N/A',\n            id_pagina: id_pagina,\n            id_paypal: 'N/A'\n        }).done((PagoResult) => {\n            // Crear página\n            publishPagina(template_info, PagoResult.fecha);\n        }).fail(function (result) {\n            // Algo salio mal\n            $('.final-msgs p').text('Algo a salido mal. Por favor, intenta de nuevo. Si el error persiste, por favor contáctanos.');\t\t\t\t\n            $('.final-msgs').dialog(\"open\");\t\t\t\t\n        });\n    };\n    var createPaypalButtons = function() {\n\t\tlet actual_page = _ctrl.new_dataManager.getObjFromLocalStorage('web2b_actualPage');\n\t\tif (actual_page && actual_page.paquete) {\n\t\t\tmanageFinalData(actual_page.fecha_fin, actual_page.paquete);\n\t\t} else {\n\t\t\t$(\".created\").hide();\n\t\t\t/* PAYPAL Buttons */\n\t\t\tlet new_paypalBtn1 = new paypalBtn();\n\t\t\tnew_paypalBtn1.init('#paypal-button-container', 'basico');\n\t\t\tlet new_paypalBtn2 = new paypalBtn();\n\t\t\tnew_paypalBtn2.init('#paypal-button-container2', 'premium');\n\t\t}\n\t};\n    var publishPagina = function(template_info = '', fecha = ''){\n\t\ttemplate_info = template_info == '' ? _ctrl.new_dataManager.getObjFromLocalStorage('web2b_template') : template_info;\n\n\t\tlet template_html = '<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js\"></script>' +\n\t\t\t\t\t\t'<script src=\"' + '/crea/Templates/Template-' + template_info.selections.templateTypeId.value + '/js/scripts.js' + '\"></script>' +\n\t\t\t\t\t\t$('#template')[0].outerHTML;\n\n\t\t//Crear pago\n\t\t$.post(\"scripts/publicar_pagina.php\", {\n\t\t\tsite_name: template_info.selections.siteName.text,\n\t\t\tcontenido: template_html,\n\t\t\ttitle: template_info.selections['inp-content-name'].text,\n\t\t\tdescription: template_info.selections['inp-content-slogan'].text\n\t\t}).done((PublishResult) => {\n\t\t\t$('.final-msgs p').text('La página se ha publicado exitosamente');\n\t\t\t$('.final-msgs').dialog(\"open\");\n\t\t\tif(fecha != '') {\n\t\t\t\tmanageFinalData(fecha, 'gratuito');\n\t\t\t}\n\t\t}).fail(function (result) {\n\t\t\t$('.final-msgs p').text('Algo ha salido mal al tratar de publicar tu página. Por favor, intenta más tarde');\n\t\t\t$('.final-msgs').dialog(\"open\");\n\t\t});\n\n    };\n    var manageFinalData = function (fecha, paquete) {\n\t\t$(\".app-cover-finish-package:first-child .finish\").css('visibility','hidden');\n\t\t$('#paypal-button-container').empty();\n\t\t$('#paypal-button-container').attr(\"style\", \"\");\n\t\t$('#paypal-button-container2').empty();\n\t\t$('#paypal-button-container2').attr(\"style\", \"\");\n\n\t\tif (paquete === 'premium') {\n\t\t\tlet new_paypalBtn2 = new paypalBtn();\n\t\t\tnew_paypalBtn2.init('#paypal-button-container2', 'premium');\n\t\t\t$('#paypal-button-container2').css('margin-bottom', '0');\n\t\t} else {\n\t\t\tlet new_paypalBtn1 = new paypalBtn();\n\t\t\tnew_paypalBtn1.init('#paypal-button-container', 'basico');\n\t\t\tlet new_paypalBtn2 = new paypalBtn();\n\t\t\tnew_paypalBtn2.init('#paypal-button-container2', 'premium');\n\t\t\t$('#paypal-button-container').css('margin-bottom', '0');\n\t\t\t$('#paypal-button-container2').css('margin-bottom', '0');\n\t\t}\n\t\t// number of days\n\t\tlet diff = _ctrl.new_utilsManager.fecha_diff(fecha);\n\t\tif(diff >= 0) {\n\t\t\t$(\".daysLeft\").text(diff);\n\t\t\t$(\".created\").fadeIn(400);\n\t\t\t$('#publish').show();\n\t\t} else {\n\t\t\t$(\".caduco\").fadeIn(400);\n\t\t\t$(\".created\").hide();\t\t\t\n\t\t}\n\t};\n    return {\n        init : init,\n        createPayment : createPayment,\n        createPaypalButtons : createPaypalButtons,\n        publishPagina : publishPagina\n    };\n}","export default function utilsManager () { \n\tvar _ctrl = null;\n\tvar init = function(_that) {\n        _ctrl = _that;\n    };\n    var validateFields = function(element, type = null) {\n\t\tif (!$(element).attr('pattern') || _ctrl.new_validator.isValidinput($(element))) {\n\t\t\t$(element).closest(\".container-input\").removeClass(\"container-error\");\n\t\t} else {\n\t\t\t$(element).closest(\".container-input\").addClass(\"container-error\");\n\t\t}\n\t};\n    var fecha_diff = function(fecha) {\n\t\t// number of days\n\t\tlet today = new Date();\n\t\tlet finArr = fecha.split(\"-\");\n\t\tlet fin = new Date(Number(finArr[0]), Number(finArr[1]) - 1, Number(finArr[2]));\n\t\tlet diff;\n\t\tif (fin >= today) {\n\t\t\tdiff = Math.ceil((Math.abs(today - fin)) / (1000 * 3600 * 24));\n\t\t} else {\n\t\t\tdiff = 0;\n\t\t}\n\t\treturn diff;\t\n\t};\n    return {\n        init : init,\n        validateFields: validateFields,\n        fecha_diff : fecha_diff\n    };\n}","export default function validator () {\n\tvar _ctrl = null;\n    var init = function(_that) {\n        _ctrl = _that;\n    };\n\tvar isValidinput = function(element){\n\t\tlet value = element.val();\n\t\tlet regex = new RegExp(element.attr(\"pattern\"));\n\t\treturn regex.test(value);\n\t};\n\tvar isEmail = function(email) {\n\t\tvar regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n\t\treturn regex.test(email);\n\t};\n\tvar isValidDomain = function(name) {\n\t\tvar regex = /([a-z0-9])/;\n\t\treturn regex.test(name);\n\t};\n\tvar validPassword = function(password) {\n\t\tvar regex = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d!$%@#£€*?&]{6,}$/;\n\t\treturn regex.test(password);\n\t};\n\treturn {\n\t\tinit : init,\n        isValidinput : isValidinput,\n        isEmail : isEmail,\n        isValidDomain : isValidDomain,\n\t\tvalidPassword : validPassword\n\t};\n}","import dataManager from '../../js/dataManager';\n\nexport default function userValidator () {\n    var _ctrl = null;\n    var new_dataManager = new dataManager();\n\n\tvar init = function(_that) {\n        _ctrl = _that;\n    };\n\n    var openLoginDialog = () => {\n        $(\".app-new-start.dialog\").dialog(\"option\", \"width\", 300);\n        $(\".app-new-start.dialog\").dialog(\"open\");\n    };\n\n    var setUserValidation = function() {\n        $(\".dialog\").dialog({\n            autoOpen: false,\n            modal: true,\n            show: {\n                effect: \"fade\",\n                duration: 1000\n            },\n            hide: {\n                effect: \"fade\",\n                duration: 1000\n            },\n            closeOnEscape: false\n        }); \n        if(_ctrl.sessionStatus == \"START SESSION\"){\n            var userId = new_dataManager.getObjFromLocalStorage(\"web2b_userId\");\n            if(typeof(userId) === 'string' && userId != ''){\n                // crear nueva página\n                $.post(\"scripts/crear_pagina.php\", {\n                    userid: userId,\n                    info: encodeURIComponent(JSON.stringify(_ctrl.jd))\n                }).done(function (result) {\n                    if (!result.ok) {\n                        openLoginDialog();\n                    } else {\n                        _ctrl.new_dataManager.setDataObjects(result, _ctrl.jd);\n                        if(result.paginas.length > 1) {\n                            $(\".change-page\").show();\n                        }\n                    }\n                }).fail(function (result) {\n                    openLoginDialog();\n                });                \n            } else {\n                openLoginDialog();\n            }\t\t\t\t\t\n        } else {\n            _ctrl.new_PageManager.getPaginas().then(() => {\n                if (_ctrl.new_PageManager.hasPages()) $(\".change-page\").show();\n            });\t\t\t\n        }\n        $(\"#single-modal i\").on(\"click\", function() {\n            $(\"#single-modal\").fadeOut();\n        });\n        /* ON NEW PAGE */\n        $(\".app-new-start form\").on(\"submit\", function (e) {\n            e.preventDefault();\n            $(\".form-error\").hide();\n            if ($(\"#nombrePagina\").val().trim() == \"\" ||\n                $(\"#correo\").val().trim() == \"\" ||\n                $(\"#password\").val().trim() == \"\") {\n                $(\".empty-fields\").css(\"display\", \"block\");\n            } else if (!_ctrl.new_validator.isValidDomain($(\"#nombrePagina\").val().trim().toLowerCase())) {\n                $(\".name-invalid\").show();\n            } else if (!_ctrl.new_validator.isEmail($(\"#correo\").val())) {\n                $(\".not-email\").css(\"display\", \"block\");\n            } else if (!_ctrl.new_validator.validPassword($(\"#password\").val())) {\n                $(\".password-invalid\").css(\"display\", \"block\");\n            } else {\n                let np = $(\"#nombrePagina\").val().trim();\n                _ctrl.new_dataManager.saveSelected(_ctrl.jd, 'inp-content-name', np, 'text');\n                $(\"#inp-content-name\").val(np);\n                let npfmt = formatValue(np);\n                $(\"#siteName\").val(npfmt);\n                $.post(\"scripts/crear_usuario.php\", {\n                    correo: $(\"#correo\").val().trim(),\n                    password: $(\"#password\").val(),\n                    info: encodeURIComponent(JSON.stringify(_ctrl.jd))\n                }).done(function (result) {\n                    if (!result.ok) {\n                        $(\".otherMsgs\").html(result.error);\n                        $(\".otherMsgs\").css(\"display\", \"block\");\n                    } else {\n                        $(\".app-new-start.dialog\").dialog('close');\n                        _ctrl.new_dataManager.setDataObjects(result, _ctrl.jd);\n                        if(result.paginas.length > 1) {\n                            $(\".change-page\").show();\n                        }\n                    }\n                }).fail(function (result) {\n                    response = JSON.parse(result.responseText);\n                    $(\".invalid-response\").text(\"Algo salió mal. Por favor intentalo de nuevo mas tarde. \" + response.mensaje);\n                    $(\".invalid-response\").css(\"display\", \"block\");\n                });\n\n            }\n        });\n    };\n    var formatValue = function (s) {\n        s = s.toLowerCase();\n        s= s.replace(/ /g, '');\n        s= s.replace(/á/g, 'a');\n        s= s.replace(/é/g, 'e');\n        s= s.replace(/í/g, 'i');\n        s= s.replace(/ó/g, 'o');\n        s= s.replace(/ú/g, 'u');\n        s= s.replace(/ñ/g, 'n');\n        return s;\n    };\n    return {\n        init : init,\n        setUserValidation: setUserValidation\n    };\n}","import loadGoogleMapsApi from 'load-google-maps-api';\n\nexport default function mapsManager() {\n    let inputId = '';\n    let mapId = '';\n    let key = 'AIzaSyBR5kBWFTVAecBoW4IKDSjttophb4BC6fg';\n    let autocomplete;\n    let _ctrl = null;\n\n\tlet init = (_that) => {\n\t\t_ctrl = _that;\n\t};\n\n    let start = (input, map) => {\n        inputId = input;\n        mapId = map;\n        initAutocomplete();\n        if(_ctrl.jd && \n            _ctrl.jd.selections &&\n            _ctrl.jd.selections[\"inp-contact-address\"] &&\n            _ctrl.jd.selections[\"inp-contact-address\"].text) {\n\n            if (_ctrl.jd.selections[\"inp-contact-address\"].text.search('##') != -1) {\n                updateMapSrc(_ctrl.jd.selections[\"inp-contact-address\"].text);\n            } else {\n                $('#' + inputId).data('place', '');\n                $('.map-error').show();\n            }\n\n        } else {\n            getInitialPos();\n        }  \n    };\n\n    let initAutocomplete = () => {\n\n        loadGoogleMapsApi({\n            libraries: ['places'],\n            key: key\n        }).then(function (googleMaps) {\n            autocomplete = new googleMaps.places.Autocomplete(\n                (document.getElementById(inputId))/*,\n                {types: ['(cities)']}*/);\n\n            autocomplete.addListener('place_changed', fillInAddress);\n            $(document.body).on(\"change\", '#' + inputId, inputMap);\n        }).catch(function (error) {\n            console.error(error);\n        });\n\n    };\n\n    let inputMap = () => {\n        $('.map-input').show();\n    };\n\n    let fillInAddress = () => {\n        $('.map-error, .map-input').hide();\n        var place = autocomplete.getPlace();\n        if (place && place.place_id) {\n            updateMapSrc('place_id:' + place.place_id);\n            $('#' + inputId).data('place', place.place_id);            \n            _ctrl.new_templateManager.updateTexts($(\"#template\"), _ctrl.jd.selections);           \n            _ctrl.new_dataManager.saveWeb2bJson(_ctrl.jd);\n        } else {\n            $('#' + inputId).data('place', '');\n            $('.map-error').show();\n        }\n    };\n\n    let updateMapSrc = (query) => {\n        let map = document.getElementById(mapId);\n        let src = \"https://www.google.com/maps/embed/v1/place?key=\" +\n            key +\n            \"&q=\" + query;\n        map.src = src;\n    };\n\n    let ipLookUp = () => {\n        $.ajax('http://ip-api.com/json')\n            .then(\n                function success(response) {\n                    console.log(response.lat, response.lon);\n                    updateMapSrc(response.lat + ',' + response.lon);\n                },\n\n                function fail(data, status) {\n                    console.log('Request failed.  Returned status of',\n                        status);\n                }\n            );\n    };\n\n    let getInitialPos = () => {\n        if (\"geolocation\" in navigator) {\n            // check if geolocation is supported/enabled on current browser\n            navigator.geolocation.getCurrentPosition(\n              function success(position) {\n                // for when getting location is a success\n                console.log('latitude', position.coords.latitude,\n                  'longitude', position.coords.longitude);\n              },\n              function error(error_message) {\n                // for when getting location results in an error\n                console.error('An error has occured while retrieving location', error_message);\n                ipLookUp();\n              }\n            );\n        } else {\n            // geolocation is not supported\n            // get your location some other way\n            console.log('geolocation is not enabled on this browser')\n            ipLookUp();\n          }\n    };\n\n    return {\n        init,\n        start\n    };\n\n}","const API_URL = 'https://maps.googleapis.com/maps/api/js'\nconst CALLBACK_NAME = '__googleMapsApiOnLoadCallback'\n\nconst optionsKeys = ['channel', 'client', 'key', 'language', 'region', 'v']\n\nlet promise = null\n\nmodule.exports = function (options = {}) {\n  promise =\n    promise ||\n    new Promise(function (resolve, reject) {\n      // Reject the promise after a timeout\n      const timeoutId = setTimeout(function () {\n        window[CALLBACK_NAME] = function () {} // Set the on load callback to a no-op\n        reject(new Error('Could not load the Google Maps API'))\n      }, options.timeout || 10000)\n\n      // Hook up the on load callback\n      window[CALLBACK_NAME] = function () {\n        if (timeoutId !== null) {\n          clearTimeout(timeoutId)\n        }\n        resolve(window.google.maps)\n        delete window[CALLBACK_NAME]\n      }\n\n      // Prepare the `script` tag to be inserted into the page\n      const scriptElement = document.createElement('script')\n      const params = [`callback=${CALLBACK_NAME}`]\n      optionsKeys.forEach(function (key) {\n        if (options[key]) {\n          params.push(`${key}=${options[key]}`)\n        }\n      })\n      if (options.libraries && options.libraries.length) {\n        params.push(`libraries=${options.libraries.join(',')}`)\n      }\n      scriptElement.src = `${options.apiUrl || API_URL}?${params.join('&')}`\n\n      // Insert the `script` tag\n      document.body.appendChild(scriptElement)\n    })\n  return promise\n}\n"],"sourceRoot":""}