!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=4)}([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e){var t=localStorage.getItem(e);if(null==t)t={},"web2b"==e&&(t.respuestas={});else try{t=JSON.parse(t)}catch(e){return t}return t};return{getObjFromLocalStorage:e,saveWeb2bJson:function(t){var a=JSON.stringify(t),n=e("web2b_userId"),o=e("web2b_templateId"),i=localStorage.getItem("web2b_template");!a||i==a||n instanceof Object||o instanceof Object||(localStorage.setItem("web2b_template",a),$.post("scripts/salvar_datos.php",{userId:n,idSitio:o,info:encodeURIComponent(a)}).done((function(e){e.ok||console.log("Algo salió mal. Por favor intentalo de nuevo mas tarde. "+e.mensaje)})).fail((function(e){console.log("Algo salió mal. Por favor intentalo de nuevo mas tarde. "+e)})))},saveSelected:function(e,t,a,n){var o=e.selections||{},i=!1;if(t.includes("@switch")){var r=t.split("@");t=r[0],i=!0}switch(o[t]=o[t]||{},n){case"image":i?o[t].active=a:o[t].img=a,o[t].type=n;break;case"text":i?o[t].active=a:o[t].text=a,o[t].type=n;break;case"config":o[t].value=a,o[t].type=n}e.selections=o},getPagesFromDB:function(){var t=e("web2b_userId");return $.get("scripts/getActualPages.php",{userId:t}).done((function(e){return e.ok||console.log("Algo salió mal. Por favor intentalo de nuevo mas tarde. "+e.mensaje),e.paginas})).fail((function(e){return console.log("Algo salió mal. Por favor intentalo de nuevo mas tarde. "+e),{}}))},setDataObjects:function(e,t){localStorage.removeItem("web2b"),localStorage.setItem("web2b_templateId",e.idSitio),localStorage.setItem("web2b_userId",e.userId),localStorage.setItem("web2b_template",JSON.stringify(t)),localStorage.setItem("web2b_pages",JSON.stringify(e.paginas))},purgeTemplateData:function(){localStorage.removeItem("web2b_actualPage"),localStorage.removeItem("web2b_template"),localStorage.removeItem("web2b_templateId"),localStorage.removeItem("web2b_template"),localStorage.removeItem("web2b")}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=[],t=new i.default;return{setPaginasInfoFromExternal:function(t){e=t},getPaginas:function(){return t.getPagesFromDB().then((function(a){var n=t.getObjFromLocalStorage("web2b_templateId");e=a.paginas,localStorage.setItem("web2b_pages",JSON.stringify(a.paginas)),a.paginas.forEach((function(e){Number(e.idSitio)===n&&localStorage.setItem("web2b_actualPage",JSON.stringify(e))}))}))},fillModal:function(a,n){for(var o,i="",r=t.getObjFromLocalStorage("web2b_actualPage"),s=0;s<e.length;s++){var l=(o=JSON.parse(decodeURIComponent(e[s].info))).nombre?o.nombre:o.selections&&o.selections.siteName&&o.selections.siteName.text?o.selections.siteName.text:"no name";e[s].idSitio===r.idSitio&&(l+="(Proyecto actual)"),i+='<option class="inserted" value="'+s+'">\n                '+l+"\n            </option>"}$(".proyectos-disponibles .inserted").remove(),$(".proyectos-disponibles").append(i),$(".ventana-login > form").hide(),$(".login-paginas").show(),$(".llevame").click({pags:e,userId:a},(function(e){var t=$(".proyectos-disponibles option:selected").val(),a=e.data;""!=t?(localStorage.setItem("web2b_template",decodeURIComponent(a.pags[t].info)),localStorage.setItem("web2b_templateId",a.pags[t].idSitio),localStorage.setItem("web2b_userId",a.userId),localStorage.setItem("web2b_pages",JSON.stringify(a.pags)),localStorage.setItem("web2b_actualPage",JSON.stringify(a.pags[t])),n()):$(".login-paginas .form-error").css("display","block")}))},hasPages:function(){return e.length>1}}};var n,o=a(0),i=(n=o)&&n.__esModule?n:{default:n}},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){var t=this,a=new i.default,n={basico:{nombre:"Básico",description:"Sitio por un año,\n        Logotipo,\n        Agregar contenido,\n        Actualizaciones",precio:"899"},premium:{nombre:"Premium",description:"Dominio .com o .mx\n        Sitio por un año,\n        Logotipo,\n        Agregar contenido,\n        Actualizaciones",precio:"1599"}},o=function(t,a){($(".app-cover-finish-package:first-child .finish").css("visibility","hidden"),$("#paypal-button-container").empty(),$("#paypal-button-container").attr("style",""),$("#paypal-button-container2").empty(),$("#paypal-button-container2").attr("style",""),"premium"===a)?((new e).init("#paypal-button-container2","premium"),$("#paypal-button-container2").css("margin-bottom","0")):((new e).init("#paypal-button-container","basico"),(new e).init("#paypal-button-container2","premium"),$("#paypal-button-container").css("margin-bottom","0"),$("#paypal-button-container2").css("margin-bottom","0"));var n=new Date,o=t.split("-"),i=new Date(Number(o[0]),Number(o[1])-1,Number(o[2])),r=void 0;i>=n?(r=Math.ceil(Math.abs(n-i)/864e5),$(".daysLeft").text(r),$(".created").fadeIn(400)):(r=0,$(".caduco").fadeIn(400),$(".created").hide())};return{init:function(e,i){return t.element=e,t.subtotal=n[i].precio,t.tax=(.16*Number(t.subtotal)).toFixed(2).toString(),t.total=(1.16*Number(t.subtotal)).toFixed(2).toString(),t.name=n[i].nombre,t.description=n[i].description,paypal.Button.render({env:"production",client:{sandbox:"AeYhV898LwB_wov8dDxwQeKLrx1Yegkzeldu8P5WNPgfxi-ic1-5qlFnL4LK0xlkdrISIc5NeVNVi-Y9",production:"Ab6PGV7NqDwbG9BNJ_2b0ttvuP53CaldZaLyn4YE2Pux_65VWHhL-IfbiYPQAkDayRzgu_3qAjHUkxUd"},locale:"es_MX",style:{label:"paypal",size:"responsive",shape:"rect",color:"blue",tagline:!1,layout:"horizontal",fundingicons:!0},funding:{allowed:[paypal.FUNDING.CARD],disallowed:[paypal.FUNDING.CREDIT]},commit:!0,payment:function(e,a){return a.payment.create({transactions:[{amount:{total:t.total,currency:"MXN",details:{subtotal:t.subtotal,tax:t.tax}},description:"Paquete "+t.name,item_list:{items:[{name:"Paquete "+t.name,description:t.description,quantity:"1",price:t.subtotal,currency:"MXN",tax:t.tax}]}}],note_to_payer:"Contáctanos si necesitas ayuda en tu compra."})},onAuthorize:function(e,t){return t.payment.execute().then((function(e){var t=a.getObjFromLocalStorage("web2b_templateId"),n=a.getObjFromLocalStorage("web2b_userId"),i=a.getObjFromLocalStorage("web2b_template"),r=JSON.stringify(e),s=-1!=e.transactions[0].item_list.items[0].name.search("Básico")?"basico":"premium";$.post("scripts/crear_pago.php",{id_usuario:n,paquete:s,info_pago:r,id_pagina:t,id_paypal:e.id}).done((function(e){$.post("scripts/publicar_pagina.php",{site_name:i.selections.siteName.text,contenido:$("#template")[0].outerHTML,title:i.selections["inp-content-name"].text,description:i.selections["inp-content-slogan"].text}).done((function(t){$(".final-msgs p").text("La página se ha publicado exitosamente"),$(".final-msgs").dialog("open"),o(e.fecha,s)})).fail((function(e){$(".final-msgs p").text("Algo ha salido al tratar de publicar tu página. Por favor, intenta más tarde"),$(".final-msgs").dialog("open")}))})).fail((function(e){}))}))},onCancel:function(e,t){},onError:function(e){}},t.element)}}};var n,o=a(0),i=(n=o)&&n.__esModule?n:{default:n}},function(e,t,a){"use strict";var n,o=a(5);var i=new((n=o)&&n.__esModule?n:{default:n}).default;i.validation(),$(document).ready((function(){i.init()}))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){console.log("hi");var e=this;e.sessionStatus="START SESSION",e.current_step=0,e.lastKeyPressed=0,e.jd={},e.jd_templateId=null,e.new_colorManager=new n.default,e.new_colorManager.init(e),e.new_imageManager=new o.default,e.new_imageManager.init(e),e.new_itemManager=new r.default,e.new_itemManager.init(e),e.new_templateManager=new s.default,e.new_templateManager.init(e),e.new_appManager=new l.default,e.new_appManager.init(e),e.new_menuManager=new c.default,e.new_menuManager.init(e),e.new_paymentsManager=new p.default,e.new_paymentsManager.init(e),e.new_utilsManager=new d.default,e.new_utilsManager.init(e),e.new_userValidator=new f.default,e.new_userValidator.init(e),e.new_mapManager=new h.default,e.new_mapManager.init(e);var t=new i.default;return e.new_dataManager=new u.default,e.new_PageManager=new m.default,e.new_validator=new g.default,{validation:function(){var t=e.new_dataManager.getObjFromLocalStorage("web2b"),a=e.new_dataManager.getObjFromLocalStorage("web2b_template");a.respuestas&&Object.keys(a.respuestas).length>2&&(e.sessionStatus="RESUME SESSION"),e.jd=Object.keys(a).length?a:t,e.jd_templateId=e.new_dataManager.getObjFromLocalStorage("web2b_templateId"),e.jd.respuestas?Object.keys(e.jd.respuestas).length<3&&(location.href="/tour"):location.href="/"},init:function(){e.new_userValidator.setUserValidation(),e.new_appManager.setApp(),e.new_templateManager.loadTemplate(e.new_appManager.afterTemplateLoad),t.setTooltips(),e.new_paymentsManager.createPaypalButtons()}}};var n=b(a(6)),o=b(a(7)),i=b(a(8)),r=b(a(9)),s=b(a(10)),l=b(a(11)),c=b(a(12)),p=b(a(13)),d=b(a(14)),u=b(a(0)),m=b(a(1)),g=b(a(15)),f=b(a(16)),h=b(a(17));function b(e){return e&&e.__esModule?e:{default:e}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null,t="#666666",a={light:"Luminoso",dark:"Oscuro",grey:"Monocromático",impact:"Impactante",colorful:"Colorido"},n="impact",o=function(){for(var e in a){var t=$(".template.control-color").clone().removeClass("template");t.find("h4").html(a[e]),t.find("input").attr("id","inp-palette-"+e),t.find("input").attr("value",e),t.find(".control-color-thumb").attr("id","thumb-"+e),$("#app-control-palettes").append(t)}};return{init:function(t){e=t,o()},updateColor:function(a,o){"START SESSION"!=e.sessionStatus&&"RESUME SESSION"!=e.sessionStatus||(a.color?t=a.color.text:a.color={name:"color",type:"text",text:t},$("#inp-color").attr("value",t),a.palette?n=a.palette.text:a.palette={name:"palette",type:"text",text:n},$("#thumb-"+n).addClass("thumb-selected"),$("#inp-palette-"+n).attr("checked","checked")),"UPDATE SESSION"==e.sessionStatus&&(n=$("[name='inp-palette']:checked").val(),a.palette.text=n,t=$("#inp-color").val(),a.color.text=t);var i="Templates/php/color/style.php?t="+1*$("[name^='inp-design']:checked").val().replace("inp-design-","")+"&hex="+t.replace("#","");$("#style-color").html("").load(i),o.attr("class","color-"+n)}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null,t={},a=[],n=[],o=function(){for(var a="-uploaded",n=Object.keys(e.jd.selections),o=0;o<n.length;o++)if(n[o].indexOf(a)>-1){var i=n[o].replace(a,""),r=e.jd.selections[n[o]];if(r.text&&""!=r.text){t[i]=[];for(var s=r.text.split(","),l=0;l<s.length;l++)t[i].push(s[l])}}},i=function(e){return new Promise((function(t,a){$.post("scripts/unsplashMW.php",{api_path:"https://api.unsplash.com/search/photos",params:"query="+encodeURIComponent(e)+"&page=1&per_page=20&orientation=landscape"}).done((function(e){t(e.results)})).fail((function(){a(Error("An error occurred while loading images from UnSplash."))}))}))},r=function(e){if(0==a.length)for(var t=0;t<e.length;t++)a.push(e[t].urls.regular+"#web2b#"+e[t].links.download_location+"#web2b#"+e[t].user.links.html+"#web2b#"+e[t].user.name);s()},s=function(){for(var o=["hero","aboutus","cta","gallery","logo","item-0"],i=$("#template .item").length,r=1;r<=i;r++)o.push("item-"+r);for(var s=0;s<o.length;s++){var c=o[s];if(n[c]=[],e.jd.selections["#img-"+c]&&e.jd.selections["#img-"+c].img)for(var p=e.jd.selections["#img-"+c].img.split(","),d=0;d<p.length;d++)""!=p[d]&&n[c].push([p[d],"selected"]);var u=[];"logo"!=c&&(u=t["#img-"+c]?t["#img-"+c].concat(a):a);for(var m=0;m<u.length;m++){for(var g=!0,f=0;f<n[c].length;f++)if(n[c][f][0]==u[m]){g=!1;break}g&&n[c].push([u[m],""])}$("#app-control-images-"+c+" .photo-container").empty();for(var h=0;h<n[c].length;h++)l(n[c][h][0],c,"selected"==n[c][h][1],!0,h)}},l=function(e,t,a,n,o){var i="";e&&-1!==e.search("#web2b#")&&(i=e.split("#web2b#"),e=i[0]);var r=$(".img-thumb.template").clone();if(r.removeClass("template").find(".img-thumb-cont").css("background-image",'url("'+e+'")').attr("data-img-url",e),r.find("input").attr("value",e),""!=i){r.find("input").attr("data-download",i[1]),r.find("input").attr("data-autor",i[2]),r.find("input").attr("data-autor-name",i[3]);var s=i[3];r.find(".img-thumb-autor a").attr("href",i[2]+"?utm_source=web2b&utm_medium=referral"),r.find(".img-thumb-autor a").text(s),r.find(".img-thumb-autor").show()}var l=r.clone();l.find("input").attr("name","inp-img-"+t),a&&("gallery"!=t&&($("#app-control-images-"+t+" .photo-container .thumb-selected").find("input").attr("checked","checked"),$("#app-control-images-"+t+" .photo-container .thumb-selected").removeClass("thumb-selected")),l.addClass("thumb-selected").find("input").attr("checked","checked")),n?$("#app-control-images-"+t+" .photo-container").append(l):$("#app-control-images-"+t+" .photo-container").prepend(l),"gallery"==t&&(l.find("input").attr("type","checkbox"),l.find(".img-thumb-overlay>span").html(o+1))},c=function(t,a,n){var o=n?e.jd.selections[a].img+",":"";e.new_dataManager.saveSelected(e.jd,a,o+t,"image")},p=function(e,t){if("logo"==t)$("#img-logo").attr("src",e);else if("gallery"==t){var a=$(".img.template").clone().removeClass("template").css("background-image",'url("'+e+'")');$("#gallery .gallery").append(a).find(".img").hide().filter(":eq(0)").show()}else $("#img-"+t).css("background-image",'url("'+e+'")')};return{init:function(t){e=t},setImageSelection:function(e){o(),i(e).then((function(e){r(e)}),(function(e){console.log(e)}))},setImagesOnStartSession:function(){e.new_dataManager.saveSelected(e.jd,"#img-gallery","","image"),$("#gallery .gallery .img").each((function(t){var a=$(this).attr("data-src"),n=""==e.jd.selections["#img-gallery"].img?"":e.jd.selections["#img-gallery"].img+",";e.new_dataManager.saveSelected(e.jd,"#img-gallery",n+a,"image")}))},setImagesOnResumeSession:function(){for(var t in e.jd.selections)switch(e.jd.selections[t].type){case"image":if("#img-logo"==t)void 0!==e.jd.selections[t].active&&!1===e.jd.selections[t].active&&(e.new_appManager.hideTemplateElements(!0,t),e.new_appManager.hideFormElements("[name='logo']","#img-logo","image")),$(t).attr("src",e.jd.selections[t].img);else if("#img-gallery"==t){$("#gallery .gallery .img").remove().detach();for(var a=e.jd.selections["#img-gallery"].img.split(","),n=0;n<a.length;n++){var o=a[n];if(o&&-1!==o.search("#web2b#")){var i=o.split("#web2b#");o=i[0]}var r=$(".img.template").clone().removeClass("template").css("background-image",'url("'+o+'")');""!=o&&$("#gallery .gallery").append(r)}$("#gallery .gallery .img:gt(0)").hide()}else{var s=e.jd.selections[t].img;if(s&&-1!==s.search("#web2b#")){var l=s.split("#web2b#");s=l[0]}$(t).attr("class","img img-MC img-L").css("background-image",'url("'+s+'")')}}},setImagesOnUpdateSession:function(t){var a=$(t);if(a.is("[value]")){var n=a.val(),o=n,i=a.attr("name").replace("inp-","#"),r=a.attr("data-download"),s=a.attr("data-autor"),l=a.attr("data-autor-name");if(n=void 0!==r?n+"#web2b#"+r+"#web2b#"+s+"#web2b#"+l:n,a.prop("checked"))void 0!==r&&$.post("scripts/unsplashMW.php",{api_path:r}),c(n,i,"#img-gallery"==i),p(o,i.replace("#img-",""));else if(a.closest("#app-control-images-gallery").length>0){var d=e.jd.selections[i].img.split(",");if(-1!=d.indexOf(n)){d.splice(d.indexOf(n),1);var u=d.join(",");e.new_dataManager.saveSelected(e.jd,i,u,"image")}$("#gallery .gallery .img").filter("[style*='"+o+"']").remove(),$("#gallery .gallery .img").hide(),$("#gallery .gallery .img").first().show()}}},uploadImage:function(t){t.preventDefault();var a=$(t.currentTarget).parent(),n=$("input[type=file]",a),o=new FormData,i=(n.data("ide"),n.attr("name"));$(".error",a).remove(),$("input[type=submit],button",a).attr("disabled",!0),o.append(n.attr("name"),n[0].files[0]),$.ajax({url:"scripts/uploadImage.php",type:"post",data:o,cache:!1,contentType:!1,processData:!1}).done((function(t){if(1==t.upload){var n="/crea/client_images/"+t.texto,o="#img-"+i,r=0,s=e.jd.selections[o+"-uploaded"]&&-1==e.jd.selections[o+"-uploaded"].text.indexOf(n)?e.jd.selections[o+"-uploaded"].text+",":"";e.new_dataManager.saveSelected(e.jd,o+"-uploaded",s+n,"text"),c(n,"#img-"+i,"gallery"==i),e.new_dataManager.saveWeb2bJson(e.jd),"gallery"==i&&(r=$("#app-control-images-"+i+" .photo-container .thumb-selected").length),l(n,i,!0,!1,r),p(n,i)}else a.append("<span class='error'>Error al subir tu foto: "+t.texto+"</span>")})).fail((function(e){console.log(e)})).always((function(){$("button",a).attr("disabled",!1)}))}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{setTooltips:function(){$(".app-control-step-tooltip-info").before($(".app-control-step-tooltip.template").clone().removeClass("template")),$(".app-control-step-tooltip").click((function(){var e=$(this).next(".app-control-step-tooltip-info");e.is(":visible")?e.removeClass("active"):e.addClass("active")}))}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null,t=0,a=0,n=null,o=function(e){console.log("item navigation "+e),$("#items-navigation").append($(".item-navigation.template").clone()),$("#items-navigation .item-navigation.template").html(e+1).removeClass("template").trigger("click")},i=function(e){var t=1*e+1,a=$(".item-control:last").clone();$("#items-control").append(a),a.find(".content-item-number").html(t),a.find("input[type=text]").attr({id:"inp-content-title-item-"+t,name:"inp-content-title-item-"+t}).val(""),a.find("textarea").attr({id:"inp-content-item-"+t,name:"inp-content-item-"+t}).val(""),a.find(".app-control-images>div:eq(0)").attr("id","app-control-images-item-"+t),a.find("input").each((function(){"file"!=$(this).attr("type")&&"submit"!=$(this).attr("type")&&$(this).attr("name","inp-img-item-"+t),"file"==$(this).attr("type")&&$(this).attr("name","item-"+t)}))},r=function(e){if(console.log("addItemToTemplate + "+e),e>=$("#template .item").length){3==$("#template .items:last .item").length&&$("#template .items:last").after("<div class='items'></div>"),0==$("#template .items").length&&$("#template #items header").after("<div class='items'></div>");var t=n.clone();t.find(".img:eq(0)").attr("id","img-item-"+e),t.find("h3:eq(0)").attr("id","val-content-title-item-"+e),t.find("p:eq(0)").attr("id","val-content-item-"+e),$("#template .items:last").append(t),$("#template .items:last").attr("class","items").addClass(s())}},s=function(){switch($("#template .items:last .item").length%3){case 0:return"three";case 1:return"one";case 2:return"two"}};return{init:function(t){e=t},setItems:function(){switch(n=$("#template .item:last").clone(),$("#template .items").remove().detach(),e.sessionStatus){case"START SESSION":e.jd.selections["inp-content-items-number"]={name:"items-number",type:"text",text:t},e.new_dataManager.saveWeb2bJson(e.jd);break;case"RESUME SESSION":t=e.jd.selections["inp-content-items-number"]&&e.jd.selections["inp-content-items-number"].text&&""!=e.jd.selections["inp-content-items-number"].text?parseInt(e.jd.selections["inp-content-items-number"].text):0,$("#inp-content-items-number").val(t);for(var a=0;a<t;a++)i(a),o(a),r(a+1)}},addItem:function(e){e<t&&(console.log(e),$("#template .items:last .item:last").remove(),0==$("#template .items:last .item").length&&$("#template .items:last").remove(),$("#template .items:last").removeClass("one two three"),$("#template .items:last").addClass(s()),$("#items-navigation .item-navigation:last").prev(".item-navigation").trigger("click"),$("#items-navigation .item-navigation:last").remove(),$(".item-control:last").remove()),e>t&&(i(t),r(e),o(t)),t=e},setContentType:function(){if(console.log("setContentType"),e.jd.selections["inp-content-item-type"]){switch(e.sessionStatus){case"RESUME SESSION":a=e.jd.selections["inp-content-item-type"].text,$("input[name='inp-content-item-type'][value='"+a+"']").prop("checked","checked");break;case"UPDATE SESSION":a=$("input[name='inp-content-item-type']:checked").val(),e.jd.selections["inp-content-item-type"].text=a}$("#content-item-type label").removeClass("checked"),$("input[name='inp-content-item-type']:checked").parent().addClass("checked")}else a=$("input[name='inp-content-item-type']:checked").val(),e.jd.selections["inp-content-item-type"]={name:"items-type",type:"text",text:a};var t="",n="";switch($("input[name='inp-content-item-type']:checked").attr("id")){case"inp-content-item-type-1":t="producto",n="productos";break;case"inp-content-item-type-2":t="servicio",n="servicios";break;case"inp-content-item-type-3":t="producto o servicio",n="productos o servicios"}$(".content-item-type").html(t),$(".content-items-type").html(n)},getCurrentStep:function(){return 0}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null,t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=$("#template"),o=e.jd.selections||{};null==t||t.href?(e.new_itemManager.setContentType(),a(n,o),e.new_colorManager.updateColor(o,n),r(t),i(n,o)):"inp-content-item-type"==t.name?e.new_itemManager.setContentType():!t.type||"text"!=t.type&&"textarea"!=t.type?"inp-color"==t.name||"inp-palette"==t.name?e.new_colorManager.updateColor(o,n):t.name.indexOf("inp-rem-content")>-1?i(n,o):r(t):a(n,o),e.new_dataManager.saveWeb2bJson(e.jd),"UPDATE SESSION"!=e.sessionStatus&&(e.sessionStatus="UPDATE SESSION")},a=function(t,a){"START SESSION"==e.sessionStatus&&$("[id^='inp-contact-'], [id^='inp-content-'], #siteName").each((function(){var n=$(this),o=n.attr("id"),i=o.replace("inp","val");if(a[o]={},"inp-content-slogan"==o){var r="";for(var s in e.jd.respuestas)if(3==e.jd.respuestas[s].tipo){r=e.jd.respuestas[s].respuesta;break}e.new_dataManager.saveSelected(e.jd,"inp-content-slogan",r,"text"),n.val(a[o]?a[o].text:""),t.find("#"+i).html(a[o]?a[o].text:"")}"inp-content-title-aboutus"!=o&&"inp-content-aboutus"!=o||(e.new_dataManager.saveSelected(e.jd,o,t.find("#"+i).html(),"text"),n.val(a[o]?a[o].text:""))})),"RESUME SESSION"==e.sessionStatus&&($("[id^='inp-contact-'], [id^='inp-content-'], #siteName").each((function(){var i=$(this),r=i.attr("id"),s=r.replace("inp","val"),l=a[r]&&a[r].text?a[r].text:"";if("inp-contact-address"==r&&-1!=l.search("##")){var c=l.split("##");l=c[0],i.data("place",c[1])}i.val(l),a[r]&&void 0!==a[r].active&&!1===a[r].active&&(n(!0,r.replace("inp-","val-")),e.new_menuManager.hideFormElements("[name='"+r+"']")),o(i,r,s,l,t,a),$("#"+s+"[pattern]").length>0&&(console.log(s),e.new_utilsManager.validateFields("#"+s)),"inp-content-name"==r&&t.find("#menu h4").html(a[r].text)})),t.find(".footer-column:not(:has(li:visible))").hide()),"UPDATE SESSION"==e.sessionStatus&&($("[id^='inp-contact-'], [id^='inp-content-'], #siteName").each((function(){var n=$(this),i=n.attr("id"),r=i.replace("inp","val"),s="",l=n.val();if("inp-contact-address"==i&&(s=l,l+=n.data("place")?"##"+n.data("place"):"",-1!=s.search("##"))){var c=s.split("##");s=c[0],n.data("place",c[1])}if(e.new_dataManager.saveSelected(e.jd,i,l,"text"),t.find("#"+r).show().closest(".column").show(),"inp-content-name"==i&&(t.find("#menu h4").html(a[i].text),t.find("#val-content-aboutus>span").length>0)){t.find("#val-content-aboutus>span").html(a[i].text);var p=t.find("#val-content-aboutus").html();p=(p=p.replace("</span>","")).replace('<span class="name">',""),t.find("#val-content-aboutus").html(p),$("#inp-content-aboutus").val(t.find("#val-content-aboutus").html())}o(n,i,r,s,t,a),n.hasClass("optional")&&$(".app-control-step:eq("+e.current_step+")").has(n).length>0&&8==e.lastKeyPressed&&t.find("#"+r).html(l)})),t.find(".footer-column:not(:has(li:visible))").hide())},n=function(e,t){"#img-logo"===t||null==t?e?$("#branding").hide():$("#branding").show():(t=t.replace("inp-","val-"),e?$("#"+t).hide():$("#"+t).show())},o=function(e,t,a,n,o,i){var r=void 0,s=void 0;switch(t){case"inp-contact-email":o.find("#val-contact-email").html("<a href='mailto:"+(i[t]?i[t].text:"")+"'>"+(i[t]?i[t].text:"")+"</a>");break;case"inp-contact-map":o.find("#val-contact-map").html(i[t]?i[t].text:"");break;case"inp-contact-address":o.find("#val-contact-address").html(i[t]?n:"");break;case"inp-contact-facebook":""!=(s=i[t]&&i[t].text&&""!=i[t].text?i[t].text.toLowerCase().split("facebook.com/"):"")?(r=s.length>1?s[1]:s[0],o.find("#val-contact-facebook").html('<span class="font-icon">g</span> <a href="http://www.facebook.com/'+r+'" target="_blank">'+r+"</a>")):o.find("#val-contact-facebook").html("");break;case"inp-contact-twitter":""!=(s=i[t]&&i[t].text&&""!=i[t].text?i[t].text.toLowerCase().split("twitter.com/"):"")?(r=s.length>1?s[1]:s[0],o.find("#val-contact-twitter").html('<span class="font-icon">t</span> <a href="http://www.twitter.com/'+r+'" target="_blank">'+r+"</a>")):o.find("#val-contact-twitter").html("");break;case"siteName":$(".siteName span").text(i[t]?i[t].text:""),$(".siteName").attr("href","http://"+(i[t]?i[t].text:"")+".web2b.mx");break;default:o.find("#"+a).html(i[t]&&""!==i[t].text?i[t].text:e.attr("placeholder"))}},i=function(t,a){"START SESSION"==e.sessionStatus&&$("[id^='inp-rem-']").each((function(){var t=$(this);e.new_dataManager.saveSelected(e.jd,t.attr("id"),"Y","text")})),"RESUME SESSION"==e.sessionStatus&&$("[id^='inp-rem-']").each((function(){var n=$(this),o=a[n.attr("id")]&&a[n.attr("id")].text?a[n.attr("id")].text:"N",i="";switch(n.attr("id")){case"inp-rem-content-cta":i="#cta";break;case"inp-rem-content-aboutus":i="#aboutus";break;case"inp-rem-content-gallery":i="#gallery";break;case"inp-rem-content-logo":i="#branding"}if("N"==o){n.prop("checked",!1);var r=n.attr("id").replace("inp-rem-content","#toggle"),s=n.attr("id").replace("inp-rem-content","#conditional");$(r).find(".fas.fa-toggle-on").attr("class","fas fa-toggle-off"),e.new_menuManager.hideFormElements($(s)),t.find(i).hide()}})),"UPDATE SESSION"==e.sessionStatus&&$("[id^='inp-rem-']").each((function(){var n=$(this),o="Y",i="";switch(n.attr("id")){case"inp-rem-content-cta":i="#cta";break;case"inp-rem-content-aboutus":i="#aboutus";break;case"inp-rem-content-gallery":i="#gallery";break;case"inp-rem-content-logo":i="#branding"}o=n.is(":checked")?"Y":"N",a[n.attr("id")]&&a[n.attr("id")].text&&(a[n.attr("id")].text=o),e.new_dataManager.saveSelected(e.jd,n.attr("id"),o,"text"),"N"==o?t.find(i).hide():t.find(i).show()}))},r=function(t){"START SESSION"==e.sessionStatus&&e.new_imageManager.setImagesOnStartSession(),"RESUME SESSION"==e.sessionStatus&&e.new_imageManager.setImagesOnResumeSession(),"UPDATE SESSION"==e.sessionStatus&&e.new_imageManager.setImagesOnUpdateSession(t)};return{init:function(t){e=t},loadTemplate:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=$("[name^='inp-design']:checked").val();if(n=n.replace("inp-design-",""),"START SESSION"==e.sessionStatus&&$("input[value='inp-design-"+n+"']").closest(".control-design-thumb").addClass("thumb-selected"),"RESUME SESSION"==e.sessionStatus){n=e.jd.selections.templateTypeId.value,$("[name^='inp-design']").removeAttr("checked");var o=$("input[value='inp-design-"+n+"']");o.attr("checked","checked"),o.closest(".control-design-thumb").addClass("thumb-selected")}a&&(e.sessionStatus="RESUME SESSION"),e.new_dataManager.saveSelected(e.jd,"templateTypeId",n,"config"),$("#template").html("");var i=e.jd.respuestas[22]&&""!=e.jd.respuestas[22].resp_id?e.jd.respuestas[22].resp_id:2,r="Templates/Template-"+n+"/index.php?t="+i+"&color=impact&hex=000000";$("#template-cont").load(r+" #template",(function(){$("#template").find("link[href^='css/styles.css']").attr("href","Templates/Template-"+n+"/css/styles.css"),e.new_imageManager.setImageSelection(e.jd.respuestas[22]&&""!=e.jd.respuestas[22].localizacion_en?e.jd.respuestas[22].localizacion_en:"nature"),e.new_itemManager.setItems(),t(),console.log("TEMPLATE LOADED"),$.ajax({url:"Templates/Template-"+n+"/js/scripts.js",dataType:"script"}),e.new_mapManager.start("inp-contact-address","iMap")}))},updateContent:t,hideTemplateElements:n,updateTexts:a}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null;return{init:function(t){e=t},setApp:function(){e.new_menuManager.setMenu(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(setTimeout((function(){$(".control-design-cont").prepend($(".control-design-thumb.thumb-selected")),$(".control-design-cont").prepend($(".control-design-thumb:last"))}),500),$(".control-design-thumb").on("click",(function(e){var t=$(this),a=$(".control-design-thumb").index(t);0==a&&t.parent().prepend($(".control-design-thumb:last")),2==a&&t.parent().append($(".control-design-thumb:first"))}))),$(".control-design-thumb").on("click",(function(){$(this).parent().find(".thumb-selected").removeClass("thumb-selected"),$(this).addClass("thumb-selected"),$("[name^='inp-design']").prop("checked",!1),$(this).find("[name^='inp-design']").prop("checked",!0),e.new_templateManager.loadTemplate(!0)})),$(".app-cover-start .next").click((function(){$("#app-cover").hide(),$(".app-cover-start").hide(),$(".app-cover-finish").show(),e.current_step=0})),$(".finish").on("click",(function(){e.new_paymentsManager.createPayment()})),$(".change-page").click((function(){$("#single-modal>div").append($(".page-switcher")).find(".page-switcher:last").show(),$("#single-modal").addClass("small").fadeIn(),$("body").append($("#modal-bg"))})),$(".change-page").click((function(t){t.preventDefault();var a=e.new_dataManager.getObjFromLocalStorage("web2b_userId");e.new_PageManager.fillModal(a,(function(){location.reload()}))})),$(".logout").click((function(e){e.preventDefault(),localStorage.clear(),location.href="/"})),$(".cerrar-ventana").click((function(){$(".ventana-login").dialog("close")})),$(".cerrar-final-msgs").click((function(){$(".final-msgs").dialog("close")})),$("#back").click((function(){e.current_step--,$("#app-cover").hide()})),$("#publish").click((function(){e.new_paymentsManager.publishPagina()}));var t=e.new_dataManager.getObjFromLocalStorage("web2b_actualPage");null!=t.fecha_fin&&(0!=e.new_utilsManager.fecha_diff(t.fecha_fin)&&$("#publish").show())}}};var n,o=a(3);(n=o)&&n.__esModule},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null,t=function(){$("[id^='switch-']").on("click",(function(){$("#app-control").toggleClass("view"),$("#app-control-nav").toggleClass("view"),$("#app-switch").toggleClass("view"),$("body").toggleClass("init")})),$(".app-control-step:gt(0)").hide();for(var t=0;t<$("#app-control>.app-control-step").length-1;t++)$("#control-view-index").append($(".control-view-index-step.current").clone().removeClass("current"));$(".control-view-nav-display-mark:eq("+e.current_step+")").addClass("control-view-nav-display-mark-active"),$("#control-view-nav>a").on("click",(function(t){if(0==$(".app-control-step .container-error").length){var a="#next"==$(this).attr("href")?1:-1,n=e.current_step+a,o=$("#app-control>.app-control-step").length;n>=o&&(n=o),1==n&&$("#control-view-nav>a:eq(0)").removeClass("disabled"),e.new_menuManager.goToStep(n,t.currentTarget)}})),$(document).on("click",".control-view-index-step",(function(t){var a=$(this),n=$(".control-view-index-step").index(a);e.new_menuManager.goToStep(n,t.currentTarget)}))},a=function(){$(document.body).on("keyup","[type='text'][name^='inp-'][id!='inp-contact-address']:not([disabled]),textarea[name^='inp-']",(function(t){e.lastKeyPressed=t.keyCode||t.which,e.new_templateManager.updateContent(t.currentTarget)})),$("[data-validate]").on("focusout",(function(t){e.new_utilsManager.validateFields(t.currentTarget,!0)})),$(document.body).on("change","[name^='inp-'][type!='text']",(function(t){e.new_templateManager.updateContent(t.currentTarget)})),$(".toggle").click((function(t){t.preventDefault();var a=$(this),o=a.attr("id").replace("toggle","#conditional"),i=a.attr("id").replace("toggle","#inp-rem-content");a.find(".fas.fa-toggle-on").length>0?a.find(".fas.fa-toggle-on").attr("class","fas fa-toggle-off"):a.find(".fas.fa-toggle-off").attr("class","fas fa-toggle-on"),$(i).trigger("click"),e.new_templateManager.updateContent(t.currentTarget),n($(o))})),$("body").on("click",".accordion h4",(function(){$(this).toggleClass("expanded"),$(this).next().toggle()})).find(".accordion h4").trigger("click"),$(document.body).on("click",".img-thumb-cont",(function(){var e=$(this);e.closest("[id^='app-control-images']").not("#app-control-images-gallery").find(".img-thumb").removeClass("thumb-selected"),e.next("input").trigger("click");var t=e.closest("[id^='app-control-images']");if(-1!=t.attr("id").search("gallery")){var a=t.find(".thumb-selected").length;e.parent().find(".img-thumb-overlay span").text(a+1)}e.parent().addClass("thumb-selected")})),$(document.body).on("click","#app-control-images-gallery .img-thumb-overlay",(function(){var e=$(this),t=e.closest("[id^='app-control-images']");if(-1!=t.attr("id").search("gallery")){var a=e.parent().find(".img-thumb-overlay span").text();t.find(".thumb-selected").each((function(e,t){var n=$(".img-thumb-overlay span",t).text();n>a&&$(".img-thumb-overlay span",t).text(n-1)}))}e.closest(".img-thumb").removeClass("thumb-selected").find("input").trigger("click")})),$(document.body).on("click",".img-thumb-cont-zoom",(function(){var e=$(this).parent().find(".img-thumb-cont").attr("data-img-url");$("#single-modal>div").html("<img src='"+e+"' class='img-thumb-zoomed' />"),$("#single-modal").fadeIn()})).append($("#single-modal")),$("body").on("DOMSubtreeModified","#app-control-images-logo",(function(){$("#app-control-images-logo").parent().attr("style","")})),$("#single-modal i").on("click",(function(){$("#single-modal").fadeOut("fast",(function(){$("body").append($(".page-switcher")).find(".page-switcher:last").hide(),$("#single-modal").attr("class",""),$("#component_templates").append($("#modal-bg"))}))})),$("body").on("click",".control-color-thumb",(function(){var e=$(this);e.closest("#app-control-palettes").find(".control-color-thumb").removeClass("thumb-selected"),e.parent().find("input").trigger("click"),e.addClass("thumb-selected")})),$("body").on("click",".control-color-radio",(function(){$(this).parent().find(".control-color-thumb").trigger("click")})),$("body").on("click",".items-change-number",(function(){var t=$(this),a=$("#inp-content-items-number"),n=t.hasClass("add-item")?1*a.val()+1:1*a.val()-1;n>=1&&n<=5&&(a.val(n),e.new_itemManager.addItem(n))})),$("body").on("click",".item-navigation",(function(){var e=$(this),t=$(".item-navigation").index(e);$(".item-navigation").removeClass("selected"),$(".item-control").hide(),e.addClass("selected"),$(".item-control:eq("+t+")").fadeIn()})),$(".file-upload button").on("click",(function(e){e.preventDefault(),$(e.currentTarget).parent().find("input[type='file']").click()})),$(".file-upload input[type=file]").on("change",(function(e){var t=$(e.currentTarget)[0].files[0].name;$("span",$(e.currentTarget).parent()).text(t),$("input[type=submit]",$(e.currentTarget).closest("form")).trigger("click"),$(e.currentTarget).closest(".accordion").next(".accordion").children("div").is(":visible")||$(e.currentTarget).closest(".accordion").next(".accordion").find("h4").trigger("click")})),$('.file-upload input[type="submit"]').on("click",e.new_imageManager.uploadImage),$("#control-optionals .tab").each((function(){$("#optionals-navigation").append($(".optional-navigation.template").clone()),$("#optionals-navigation .optional-navigation.template").removeClass("template").html($(this).find("h3:first span").html())})).hide(),$("body").on("click",".optional-navigation",(function(){var e=$(this),t=$(".optional-navigation").index(e);$(".optional-navigation").removeClass("selected"),e.addClass("selected"),$("#control-optionals .tab").hide(),$("#control-optionals .tab:eq("+t+")").fadeIn()})),$("#optionals-navigation .optional-navigation:first").trigger("click")},n=function(e){e.toggleClass("hidden")};return{init:function(t){e=t},setMenu:function(){t(),a(),$("#ok_btn").click((function(){$(".alert.dialog").dialog("close")}))},hideFormElements:n,goToStep:function(t,a){0==$(".app-control-step .container-error").length?(e.current_step=t,e.new_templateManager.updateContent(a),-1==t?($("#app-cover").show(),$(".app-cover-start").show(),$(".app-cover-finish").hide()):t<$(".app-control-step").length?($(".app-control-step").hide().filter(":eq("+t+")").show(),$(".control-view-index-step").removeClass("current").filter(":eq("+t+")").addClass("current")):($("#app-cover").show(),$(".app-cover-start").hide(),$(".app-cover-finish").show()),$(".app-control-step:eq("+t+") #color-pointer").length>0?$("#color-pointer").addClass("focus"):$("#color-pointer").removeClass("focus")):$(".app-control-step .container-error").hide().fadeIn("fast")}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null,t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o='<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"><\/script><script src="/crea/Templates/Template-'+(t=""==t?e.new_dataManager.getObjFromLocalStorage("web2b_template"):t).selections.templateTypeId.value+'/js/scripts.js"><\/script>'+$("#template")[0].outerHTML;$.post("scripts/publicar_pagina.php",{site_name:t.selections.siteName.text,contenido:o,title:t.selections["inp-content-name"].text,description:t.selections["inp-content-slogan"].text}).done((function(e){$("#app-cover").scrollTop(0),$(".final-msgs p").text("La página se ha publicado exitosamente"),$(".final-msgs").dialog("open"),""!=n&&a(n,"gratuito")})).fail((function(e){$(".final-msgs p").text("Algo ha salido mal al tratar de publicar tu página. Por favor, intenta más tarde"),$(".final-msgs").dialog("open")}))},a=function(t,a){($(".app-cover-finish-package:first-child .finish").css("visibility","hidden"),$("#paypal-button-container").empty(),$("#paypal-button-container").attr("style",""),$("#paypal-button-container2").empty(),$("#paypal-button-container2").attr("style",""),"premium"===a)?((new i.default).init("#paypal-button-container2","premium"),$("#paypal-button-container2").css("margin-bottom","0")):((new i.default).init("#paypal-button-container","basico"),(new i.default).init("#paypal-button-container2","premium"),$("#paypal-button-container").css("margin-bottom","0"),$("#paypal-button-container2").css("margin-bottom","0"));var n=e.new_utilsManager.fecha_diff(t);n>=0?($(".daysLeft").text(n),$(".created").fadeIn(400),$("#publish").show()):($(".caduco").fadeIn(400),$(".created").hide())};return{init:function(t){e=t},createPayment:function(){var a=e.new_dataManager.getObjFromLocalStorage("web2b_templateId"),n=e.new_dataManager.getObjFromLocalStorage("web2b_userId"),o=e.new_dataManager.getObjFromLocalStorage("web2b_template");if(""==o.selections.siteName.text.trim()||o.selections.siteName.text.trim().lenght<3)return $(".final-msgs p").text("El nombre de tu sitio no ha sido proporcionado. Por favor, regresa a las pantallas anteriores para definirlo."),void $(".final-msgs").dialog("open");$.post("scripts/crear_pago.php",{id_usuario:n,paquete:"gratuito",info_pago:"N/A",id_pagina:a,id_paypal:"N/A"}).done((function(e){t(o,e.fecha)})).fail((function(e){$(".final-msgs p").text("Algo a salido mal. Por favor, intenta de nuevo. Si el error persiste, por favor contáctanos."),$(".final-msgs").dialog("open")}))},createPaypalButtons:function(){var t=e.new_dataManager.getObjFromLocalStorage("web2b_actualPage");t&&t.paquete?a(t.fecha_fin,t.paquete):($(".created").hide(),(new i.default).init("#paypal-button-container","basico"),(new i.default).init("#paypal-button-container2","premium"))},publishPagina:t}};var n,o=a(3),i=(n=o)&&n.__esModule?n:{default:n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null;return{init:function(t){e=t},validateFields:function(t){!$(t).attr("pattern")||e.new_validator.isValidinput($(t))?$(t).closest(".container-input").removeClass("container-error"):$(t).closest(".container-input").addClass("container-error")},fecha_diff:function(e){var t=new Date,a=e.split("-"),n=new Date(Number(a[0]),Number(a[1])-1,Number(a[2]));return n>=t?Math.ceil(Math.abs(t-n)/864e5):-1}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{init:function(e){e},isValidinput:function(e){var t=e.val();return new RegExp(e.attr("pattern")).test(t)},isEmail:function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},isValidDomain:function(e){return/([a-z0-9])/.test(e)},validPassword:function(e){return/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!$%@#£€*?&]{6,}$/.test(e)}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=null,t=new i.default,a=function(){$(".app-new-start.dialog").dialog("option","width",300),$(".app-new-start.dialog").dialog("open")},n=function(e){return e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/ /g,"")).replace(/á/g,"a")).replace(/é/g,"e")).replace(/í/g,"i")).replace(/ó/g,"o")).replace(/ú/g,"u")).replace(/ñ/g,"n")};return{init:function(t){e=t},setUserValidation:function(){if($(".dialog").dialog({autoOpen:!1,modal:!0,show:{effect:"fade",duration:1e3},hide:{effect:"fade",duration:1e3},closeOnEscape:!1}),"START SESSION"==e.sessionStatus){var o=t.getObjFromLocalStorage("web2b_userId");"string"==typeof o&&""!=o?$.post("scripts/crear_pagina.php",{userid:o,info:encodeURIComponent(JSON.stringify(e.jd))}).done((function(t){t.ok?(e.new_dataManager.setDataObjects(t,e.jd),t.paginas.length>1&&$(".change-page").show()):a()})).fail((function(e){a()})):a()}else e.new_PageManager.getPaginas().then((function(){e.new_PageManager.hasPages()&&$(".change-page").show()}));$(".app-new-start form").on("submit",(function(t){if(t.preventDefault(),$(".form-error").hide(),""==$("#nombrePagina").val().trim()||""==$("#correo").val().trim()||""==$("#password").val().trim())$(".empty-fields").css("display","block");else if(e.new_validator.isValidDomain($("#nombrePagina").val().trim().toLowerCase()))if(e.new_validator.isEmail($("#correo").val()))if(e.new_validator.validPassword($("#password").val())){var a=$("#nombrePagina").val().trim();e.new_dataManager.saveSelected(e.jd,"inp-content-name",a,"text"),$("#inp-content-name").val(a);var o=n(a);$("#siteName").val(o),$.post("scripts/crear_usuario.php",{correo:$("#correo").val().trim(),password:$("#password").val(),info:encodeURIComponent(JSON.stringify(e.jd))}).done((function(t){t.ok?($(".app-new-start.dialog").dialog("close"),e.new_dataManager.setDataObjects(t,e.jd),t.paginas.length>1&&$(".change-page").show()):($(".otherMsgs").html(t.error),$(".otherMsgs").css("display","block"))})).fail((function(e){response=JSON.parse(e.responseText),$(".invalid-response").text("Algo salió mal. Por favor intentalo de nuevo mas tarde. "+response.mensaje),$(".invalid-response").css("display","block")}))}else $(".password-invalid").css("display","block");else $(".not-email").css("display","block");else $(".name-invalid").show()}))}}};var n,o=a(0),i=(n=o)&&n.__esModule?n:{default:n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e="",t="",a="AIzaSyBR5kBWFTVAecBoW4IKDSjttophb4BC6fg",n=void 0,o=null,r=function(){(0,i.default)({libraries:["places"],key:a}).then((function(t){(n=new t.places.Autocomplete(document.getElementById(e))).addListener("place_changed",l),$(document.body).on("change","#"+e,s)})).catch((function(e){console.error(e)}))},s=function(){$(".map-input").show()},l=function(){$(".map-error, .map-input").hide();var t=n.getPlace();t&&t.place_id?(c("place_id:"+t.place_id),$("#"+e).data("place",t.place_id),o.new_templateManager.updateTexts($("#template"),o.jd.selections),o.new_dataManager.saveWeb2bJson(o.jd)):($("#"+e).data("place",""),$(".map-error").show())},c=function(e){var n=document.getElementById(t),o="https://www.google.com/maps/embed/v1/place?key="+a+"&q="+e;n.src=o},p=function(){$.ajax("http://ip-api.com/json").then((function(e){console.log(e.lat,e.lon),c(e.lat+","+e.lon)}),(function(e,t){console.log("Request failed.  Returned status of",t)}))},d=function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){console.log("latitude",e.coords.latitude,"longitude",e.coords.longitude)}),(function(e){console.error("An error has occured while retrieving location",e),p()})):(console.log("geolocation is not enabled on this browser"),p())};return{init:function(e){o=e},start:function(a,n){e=a,t=n,r(),o.jd&&o.jd.selections&&o.jd.selections["inp-contact-address"]&&o.jd.selections["inp-contact-address"].text?-1!=o.jd.selections["inp-contact-address"].text.search("##")?c(o.jd.selections["inp-contact-address"].text):($("#"+e).data("place",""),$(".map-error").show()):d()}}};var n,o=a(18),i=(n=o)&&n.__esModule?n:{default:n}},function(e,t){const a="__googleMapsApiOnLoadCallback",n=["channel","client","key","language","region","v"];let o=null;e.exports=function(e={}){return o=o||new Promise((function(t,o){const i=setTimeout((function(){window[a]=function(){},o(new Error("Could not load the Google Maps API"))}),e.timeout||1e4);window[a]=function(){null!==i&&clearTimeout(i),t(window.google.maps),delete window[a]};const r=document.createElement("script"),s=["callback="+a];n.forEach((function(t){e[t]&&s.push(`${t}=${e[t]}`)})),e.libraries&&e.libraries.length&&s.push("libraries="+e.libraries.join(",")),r.src=`${e.apiUrl||"https://maps.googleapis.com/maps/api/js"}?${s.join("&")}`,document.body.appendChild(r)})),o}}]);
//# sourceMappingURL=crea.bundle.js.map